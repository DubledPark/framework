<?xml version="1.0" encoding="utf-8"?>
<mx:AdvancedDataGrid xmlns:fx="http://ns.adobe.com/mxml/2009" 
					 xmlns:s="library://ns.adobe.com/flex/spark" 
					 xmlns:mx="library://ns.adobe.com/flex/mx" 
					 xmlns:ui="org.samchon.ui.*" 
					 
					 sortableColumns="false" sortExpertMode="true"
					 doubleClickEnabled="true" itemDoubleClick="itemDoubleClicked(event)"
					 >
	<fx:Declarations>
		<!-- Place non-visual elements (e.g., services, value objects) here -->
	</fx:Declarations>
	<fx:Script>
		<![CDATA[
			import mx.collections.XMLListCollection;
			import mx.controls.Alert;
			import mx.events.ListEvent;
			
			import org.samchon.simulation.movie.BackTestingMovie;
			import org.samchon.simulation.simulation.backtesting.history.BTHistoryArray;
			
			[Bindable]public var xmlListCollection:XMLListCollection;
			public var historyArray:BTHistoryArray;
			public var index:int;
			
			protected function itemDoubleClicked(event:ListEvent):void
			{
				if( selectedItem == null || selectedItem.hasOwnProperty("@algorithmIndex") == false )
					return;
				
				var algorithmIndex:String = selectedItem.@algorithmIndex;
				var corporateIndex:int = selectedItem.@corporateIndex;
				
				var title:String = historyArray.toTitle(index, algorithmIndex, corporateIndex);
				var xml:String = historyArray.toCandleXMLAt( index, algorithmIndex, corporateIndex );
				
				ExternalInterface.call("openBTWindow", title, xml);
			}
			
		]]>
	</fx:Script>
	
	<mx:dataProvider>
		<mx:HierarchicalData source="{xmlListCollection}" />
	</mx:dataProvider>
	<mx:groupedColumns>
		<mx:AdvancedDataGridColumn headerText="Corporate Name"	dataField="@name" width="300" />
		<mx:AdvancedDataGridColumnGroup headerText="Bought">
			<mx:AdvancedDataGridColumn headerText="Average"  	dataField="@boughtAverage"		itemRenderer="org.samchon.ui.label.DataGridNumberLabel"	/>
			<mx:AdvancedDataGridColumn headerText="Volume"   	dataField="@boughtVolume"		itemRenderer="org.samchon.ui.label.DataGridNumberLabel"	/>
			<mx:AdvancedDataGridColumn headerText="Amount"   	dataField="@boughtAmount"		itemRenderer="org.samchon.ui.label.DataGridNumberLabel"	/>
		</mx:AdvancedDataGridColumnGroup>
		<mx:AdvancedDataGridColumnGroup headerText="Sold">
			<mx:AdvancedDataGridColumn headerText="Average"  	dataField="@soldAverage"		itemRenderer="org.samchon.ui.label.DataGridNumberLabel"	/>
			<mx:AdvancedDataGridColumn headerText="Volume"   	dataField="@soldVolume"			itemRenderer="org.samchon.ui.label.DataGridNumberLabel"	/>
			<mx:AdvancedDataGridColumn headerText="Amount"   	dataField="@soldAmount"			itemRenderer="org.samchon.ui.label.DataGridNumberLabel"	/>
		</mx:AdvancedDataGridColumnGroup>
		<mx:AdvancedDataGridColumnGroup headerText="Real">
			<mx:AdvancedDataGridColumn headerText="Profit"      dataField="@realProfit"			itemRenderer="org.samchon.ui.label.DataGridColorNumberLabel"	/>
			<mx:AdvancedDataGridColumn headerText="Return Rate" dataField="@realSimpleReturn"	itemRenderer="org.samchon.ui.label.DataGridColorPercentLabel"	/>
			<mx:AdvancedDataGridColumn headerText="RR% / 1Y"    dataField="@realYearReturn"		itemRenderer="org.samchon.ui.label.DataGridColorPercentLabel"	/>
		</mx:AdvancedDataGridColumnGroup>
		<mx:AdvancedDataGridColumnGroup headerText="Paper">
			<mx:AdvancedDataGridColumn headerText="Profit"      dataField="@paperProfit"		itemRenderer="org.samchon.ui.label.DataGridColorNumberLabel"	/>
			<mx:AdvancedDataGridColumn headerText="Return Rate" dataField="@paperSimpleReturn"	itemRenderer="org.samchon.ui.label.DataGridColorPercentLabel"	/>
			<mx:AdvancedDataGridColumn headerText="RR% / 1Y"    dataField="@paperYearReturn"	itemRenderer="org.samchon.ui.label.DataGridColorPercentLabel"	/>
		</mx:AdvancedDataGridColumnGroup>
	</mx:groupedColumns>
	<!--
	<mx:rendererProviders>            
		<mx:AdvancedDataGridRendererProvider 
			renderer="org.samchon.simulation.backtesting.result.detail.BTCandleChart"
			dataField="index" 
			columnIndex="1" columnSpan="0"/>         
	</mx:rendererProviders>
	-->
</mx:AdvancedDataGrid>
