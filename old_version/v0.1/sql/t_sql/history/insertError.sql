SET 
  ANSI_NULLS, 
  QUOTED_IDENTIFIER, 
  CONCAT_NULL_YIELDS_NULL, 
  ANSI_WARNINGS, 
  ANSI_PADDING 
ON;

USE OraQ;
IF OBJECT_ID('insertError') IS NOT NULL	DROP PROCEDURE insertError;
GO

CREATE PROCEDURE insertError
	@serviceID INT,
	@errorID INT,
	@memberID NVARCHAR(100)
AS
	--INSERT INTO INVOKE AND GET AUTO_INCREMENTED
	INSERT INTO History.history VALUES (@memberID, GETDATE());
	DECLARE @historyUID INT = SCOPE_IDENTITY();

	--INSERT INTO ERROR
	INSERT INTO History.error VALUES (@historyUID, @serviceID, @errorID);
GO