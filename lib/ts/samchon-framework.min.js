var __extends=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},samchon;!function(t){function e(){return"object"==typeof process&&"object"==typeof process.versions&&"undefined"!=typeof process.versions.node}t.is_node=e}(samchon||(samchon={}));try{eval("var std = require('typescript-stl')"),eval("var http = require('http')"),eval("var websocket = require('websocket')"),eval("var net = require('net')")}catch(t){}var samchon;!function(t){var e;!function(e){var n=function(n){function o(){n.apply(this,arguments),this.event_dispatcher_=new t.library.EventDispatcher(this)}return __extends(o,n),o.prototype.push=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];var o=n.prototype.push.apply(this,t);return this.notify_insert(this.end().advance(-t.length),this.end()),o},o.prototype.push_back=function(t){n.prototype.push_back.call(this,t),this.notify_insert(this.end().prev(),this.end())},o.prototype._Insert_by_repeating_val=function(t,e,o){var r=n.prototype._Insert_by_repeating_val.call(this,t,e,o);return this.notify_insert(r,r.advance(e)),r},o.prototype._Insert_by_range=function(t,e,o){var r=this.size(),i=n.prototype._Insert_by_range.call(this,t,e,o);return r=this.size()-r,this.notify_insert(i,i.advance(r)),i},o.prototype._Erase_by_range=function(t,e){return this.notify_erase(t,e),n.prototype._Erase_by_range.call(this,t,e)},o.prototype.notify_insert=function(t,n){e.ICollection._Dispatch_CollectionEvent(this,"insert",t,n)},o.prototype.notify_erase=function(t,n){e.ICollection._Dispatch_CollectionEvent(this,"erase",t,n)},o.prototype.hasEventListener=function(t){return this.event_dispatcher_.hasEventListener(t)},o.prototype.dispatchEvent=function(t){return this.event_dispatcher_.dispatchEvent(t)},o.prototype.refresh=function(){for(var t=[],n=0;n<arguments.length;n++)t[n-0]=arguments[n];var o,r;0==t.length?(o=this.begin(),r=this.end()):1==t.length?(o=t[0],r=o.next()):(o=t[0],r=t[1]),this.dispatchEvent(new e.CollectionEvent("refresh",o,r))},o.prototype.addEventListener=function(t,e,n){void 0===n&&(n=null),this.event_dispatcher_.addEventListener(t,e,n)},o.prototype.removeEventListener=function(t,e,n){void 0===n&&(n=null),this.event_dispatcher_.removeEventListener(t,e,n)},o.prototype.unshift=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];var o=n.prototype.unshift.apply(this,t);return this.notify_insert(this.begin(),this.begin().advance(t.length)),o},o.prototype.pop=function(){return this.notify_erase(this.end().prev(),this.end()),n.prototype.pop.call(this)},o.prototype.splice=function(t,e){void 0===e&&(e=this.size()-t);for(var o=[],r=2;r<arguments.length;r++)o[r-2]=arguments[r];t+e>this.size()&&(e=this.size()-t);var i=new std.VectorIterator(this,t),s=i.advance(e);return this.notify_erase(i,s),n.prototype.splice.apply(this,[t,e].concat(o))},o}(std.Vector);e.ArrayCollection=n}(e=t.collection||(t.collection={}))}(samchon||(samchon={}));var samchon;!function(t){var e;!function(t){var e=function(){function t(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=!1),this.type_=t.toLowerCase(),this.target_=null,this.currentTarget_=null,this.trusted_=!1,this.bubbles_=e,this.cancelable_=n,this.defaultPrevented_=!1,this.cancelBubble_=!1,this.timeStamp_=new Date}return t.prototype.initEvent=function(t,e,n){this.type_=t.toLowerCase(),this.bubbles_=e,this.cancelable_=n},t.prototype.stopImmediatePropagation=function(){},t.prototype.stopPropagation=function(){},Object.defineProperty(t.prototype,"type",{get:function(){return this.type_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"target",{get:function(){return this.target_},set:function(t){this.target_=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentTarget",{get:function(){return this.currentTarget_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isTrusted",{get:function(){return this.isTrusted},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bubbles",{get:function(){return this.bubbles_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cancelable",{get:function(){return this.cancelable_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"eventPhase",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"defaultPrevented",{get:function(){return this.defaultPrevented_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"srcElement",{get:function(){return null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cancelBubble",{get:function(){return this.cancelBubble_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"timeStamp",{get:function(){return this.timeStamp_.getTime()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"returnValue",{get:function(){return!1},enumerable:!0,configurable:!0}),t}();t.BasicEvent=e}(e=t.library||(t.library={}))}(samchon||(samchon={}));var samchon;!function(t){var e;!function(e){var n=function(t){function e(e,n,o){t.call(this,e,!1,"insert"==e||"erase"==e),"erase"==e&&(n instanceof std.VectorIterator||n instanceof std.DequeIterator)?(this.temporary_container_=new std.Vector(n,o),this.origin_first_=n,this.first_=this.temporary_container_.begin(),this.last_=this.temporary_container_.end()):(this.temporary_container_=null,this.origin_first_=null,this.first_=n,this.last_=o)}return __extends(e,t),Object.defineProperty(e.prototype,"target",{get:function(){return this.target_},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"first",{get:function(){return this.first_},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"last",{get:function(){return this.last_},enumerable:!0,configurable:!0}),e.prototype.preventDefault=function(){if(0!=this.cancelable){if(this.defaultPrevented_=!0,"insert"==this.type)this.target.erase(this.first_,this.last_);else if("erase"==this.type){var t=this.target,e=void 0;e=null==this.temporary_container_?this.first_.prev().next():this.origin_first_.prev().next(),t.insert(e,this.first_,this.last_)}this.defaultPrevented_=!1}},e}(t.library.BasicEvent);e.CollectionEvent=n}(e=t.collection||(t.collection={}))}(samchon||(samchon={}));var samchon;!function(t){var e;!function(t){var e;!function(t){t.INSERT="insert",t.ERASE="erase",t.REFRESH="refresh"}(e=t.CollectionEvent||(t.CollectionEvent={}))}(e=t.collection||(t.collection={}))}(samchon||(samchon={}));var samchon;!function(t){var e;!function(e){var n=function(n){function o(){n.apply(this,arguments),this.event_dispatcher_=new t.library.EventDispatcher(this)}return __extends(o,n),o.prototype.push=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];var o=n.prototype.push.apply(this,t);return this.notify_insert(this.end().advance(-t.length),this.end()),o},o.prototype.push_back=function(t){n.prototype.push.call(this,t),this.notify_insert(this.end().prev(),this.end())},o.prototype._Insert_by_repeating_val=function(t,e,o){var r=n.prototype._Insert_by_repeating_val.call(this,t,e,o);return this.notify_insert(r,r.advance(e)),r},o.prototype._Insert_by_range=function(t,e,o){var r=this.size(),i=n.prototype._Insert_by_range.call(this,t,e,o);return r=this.size()-r,this.notify_insert(i,i.advance(r)),i},o.prototype.pop_back=function(){this.notify_erase(this.end().prev(),this.end()),n.prototype.pop_back.call(this)},o.prototype._Erase_by_range=function(t,e){return this.notify_erase(t,e),n.prototype._Erase_by_range.call(this,t,e)},o.prototype.notify_insert=function(t,n){e.ICollection._Dispatch_CollectionEvent(this,"insert",t,n)},o.prototype.notify_erase=function(t,n){e.ICollection._Dispatch_CollectionEvent(this,"erase",t,n)},o.prototype.hasEventListener=function(t){return this.event_dispatcher_.hasEventListener(t)},o.prototype.dispatchEvent=function(t){return this.event_dispatcher_.dispatchEvent(t)},o.prototype.refresh=function(){for(var t=[],n=0;n<arguments.length;n++)t[n-0]=arguments[n];var o,r;0==t.length?(o=this.begin(),r=this.end()):1==t.length?(o=t[0],r=o.next()):(o=t[0],r=t[1]),this.dispatchEvent(new e.CollectionEvent("refresh",o,r))},o.prototype.addEventListener=function(t,e,n){void 0===n&&(n=null),this.event_dispatcher_.addEventListener(t,e,n)},o.prototype.removeEventListener=function(t,e,n){void 0===n&&(n=null),this.event_dispatcher_.removeEventListener(t,e,n)},o}(std.Deque);e.DequeCollection=n}(e=t.collection||(t.collection={}))}(samchon||(samchon={}));var samchon;!function(t){var e;!function(e){var n=function(n){function o(){n.apply(this,arguments),this.event_dispatcher_=new t.library.EventDispatcher(this)}return __extends(o,n),o.prototype._Handle_insert=function(t,o){n.prototype._Handle_insert.call(this,t,o),e.ICollection._Dispatch_MapCollectionEvent(this,"insert",t,o)},o.prototype._Handle_erase=function(t,o){n.prototype._Handle_erase.call(this,t,o),e.ICollection._Dispatch_MapCollectionEvent(this,"erase",t,o)},o.prototype.hasEventListener=function(t){return this.event_dispatcher_.hasEventListener(t)},o.prototype.dispatchEvent=function(t){return this.event_dispatcher_.dispatchEvent(t)},o.prototype.refresh=function(){for(var t=[],n=0;n<arguments.length;n++)t[n-0]=arguments[n];var o,r;0==t.length?(o=this.begin(),r=this.end()):1==t.length?(o=t[0],r=o.next()):(o=t[0],r=t[1]),this.dispatchEvent(new e.MapCollectionEvent("refresh",o,r))},o.prototype.addEventListener=function(t,e,n){void 0===n&&(n=null),this.event_dispatcher_.addEventListener(t,e,n)},o.prototype.removeEventListener=function(t,e,n){void 0===n&&(n=null),this.event_dispatcher_.removeEventListener(t,e,n)},o}(std.HashMap);e.HashMapCollection=n}(e=t.collection||(t.collection={}))}(samchon||(samchon={}));var samchon;!function(t){var e;!function(e){var n=function(n){function o(){n.apply(this,arguments),this.event_dispatcher_=new t.library.EventDispatcher(this)}return __extends(o,n),o.prototype._Handle_insert=function(t,o){n.prototype._Handle_insert.call(this,t,o),e.ICollection._Dispatch_MapCollectionEvent(this,"insert",t,o)},o.prototype._Handle_erase=function(t,o){n.prototype._Handle_erase.call(this,t,o),e.ICollection._Dispatch_MapCollectionEvent(this,"erase",t,o)},o.prototype.hasEventListener=function(t){return this.event_dispatcher_.hasEventListener(t)},o.prototype.dispatchEvent=function(t){return this.event_dispatcher_.dispatchEvent(t)},o.prototype.refresh=function(){for(var t=[],n=0;n<arguments.length;n++)t[n-0]=arguments[n];var o,r;0==t.length?(o=this.begin(),r=this.end()):1==t.length?(o=t[0],r=o.next()):(o=t[0],r=t[1]),this.dispatchEvent(new e.MapCollectionEvent("refresh",o,r))},o.prototype.addEventListener=function(t,e,n){void 0===n&&(n=null),this.event_dispatcher_.addEventListener(t,e,n)},o.prototype.removeEventListener=function(t,e,n){void 0===n&&(n=null),this.event_dispatcher_.removeEventListener(t,e,n)},o}(std.HashMap);e.HashMultiMapCollection=n}(e=t.collection||(t.collection={}))}(samchon||(samchon={}));var samchon;!function(t){var e;!function(e){var n=function(n){function o(){n.apply(this,arguments),this.event_dispatcher_=new t.library.EventDispatcher(this)}return __extends(o,n),o.prototype._Handle_insert=function(t,o){n.prototype._Handle_insert.call(this,t,o),e.ICollection._Dispatch_CollectionEvent(this,"insert",t,o)},o.prototype._Handle_erase=function(t,o){n.prototype._Handle_erase.call(this,t,o),e.ICollection._Dispatch_CollectionEvent(this,"erase",t,o)},o.prototype.hasEventListener=function(t){return this.event_dispatcher_.hasEventListener(t)},o.prototype.dispatchEvent=function(t){return this.event_dispatcher_.dispatchEvent(t)},o.prototype.refresh=function(){for(var t=[],n=0;n<arguments.length;n++)t[n-0]=arguments[n];var o,r;0==t.length?(o=this.begin(),r=this.end()):1==t.length?(o=t[0],r=o.next()):(o=t[0],r=t[1]),this.dispatchEvent(new e.CollectionEvent("refresh",o,r))},o.prototype.addEventListener=function(t,e,n){void 0===n&&(n=null),this.event_dispatcher_.addEventListener(t,e,n)},o.prototype.removeEventListener=function(t,e,n){void 0===n&&(n=null),this.event_dispatcher_.removeEventListener(t,e,n)},o}(std.HashMultiSet);e.HashMultiSetCollection=n}(e=t.collection||(t.collection={}))}(samchon||(samchon={}));var samchon;!function(t){var e;!function(e){var n=function(n){function o(){n.apply(this,arguments),this.event_dispatcher_=new t.library.EventDispatcher(this)}return __extends(o,n),o.prototype._Handle_insert=function(t,o){n.prototype._Handle_insert.call(this,t,o),e.ICollection._Dispatch_CollectionEvent(this,"insert",t,o)},o.prototype._Handle_erase=function(t,o){n.prototype._Handle_erase.call(this,t,o),e.ICollection._Dispatch_CollectionEvent(this,"erase",t,o)},o.prototype.hasEventListener=function(t){return this.event_dispatcher_.hasEventListener(t)},o.prototype.dispatchEvent=function(t){return this.event_dispatcher_.dispatchEvent(t)},o.prototype.refresh=function(){for(var t=[],n=0;n<arguments.length;n++)t[n-0]=arguments[n];var o,r;0==t.length?(o=this.begin(),r=this.end()):1==t.length?(o=t[0],r=o.next()):(o=t[0],r=t[1]),this.dispatchEvent(new e.CollectionEvent("refresh",o,r))},o.prototype.addEventListener=function(t,e,n){void 0===n&&(n=null),this.event_dispatcher_.addEventListener(t,e,n)},o.prototype.removeEventListener=function(t,e,n){void 0===n&&(n=null),this.event_dispatcher_.removeEventListener(t,e,n)},o}(std.HashSet);e.HashSetCollection=n}(e=t.collection||(t.collection={}))}(samchon||(samchon={}));var samchon;!function(t){var e;!function(t){var e;!function(e){function n(e,n,o,r){if(0!=e.hasEventListener(n)){var i=new t.CollectionEvent(n,o,r);setTimeout(function(){e.dispatchEvent(i)})}}function o(e,n,o,r){if(0!=e.hasEventListener(n)){var i=new t.MapCollectionEvent(n,o,r);setTimeout(function(){e.dispatchEvent(i)})}}e._Dispatch_CollectionEvent=n,e._Dispatch_MapCollectionEvent=o}(e=t.ICollection||(t.ICollection={}))}(e=t.collection||(t.collection={}))}(samchon||(samchon={}));var samchon;!function(t){var e;!function(e){var n=function(n){function o(){n.apply(this,arguments),this.event_dispatcher_=new t.library.EventDispatcher(this)}return __extends(o,n),o.prototype.push=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];var o=n.prototype.push.apply(this,t);return this.notify_insert(this.end().advance(-t.length),this.end()),o},o.prototype.push_front=function(t){n.prototype.push_front.call(this,t),this.notify_insert(this.begin(),this.begin().next())},o.prototype.push_back=function(t){n.prototype.push_back.call(this,t),this.notify_insert(this.end().prev(),this.end())},o.prototype._Insert_by_repeating_val=function(t,e,o){var r=n.prototype._Insert_by_repeating_val.call(this,t,e,o);return this.notify_insert(r,r.advance(e)),r},o.prototype._Insert_by_range=function(t,e,o){var r=this.size(),i=n.prototype._Insert_by_range.call(this,t,e,o);return r=this.size()-r,this.notify_insert(i,i.advance(r)),i},o.prototype.pop_front=function(){var t=this.begin();n.prototype.pop_front.call(this),this.notify_erase(t,t.next())},o.prototype.pop_back=function(){var t=this.end().prev();n.prototype.pop_back.call(this),this.notify_erase(t,this.end())},o.prototype._Erase_by_range=function(t,e){var o=n.prototype._Erase_by_range.call(this,t,e);return this.notify_erase(t,e),o},o.prototype.notify_insert=function(t,n){e.ICollection._Dispatch_CollectionEvent(this,"insert",t,n)},o.prototype.notify_erase=function(t,n){e.ICollection._Dispatch_CollectionEvent(this,"erase",t,n)},o.prototype.hasEventListener=function(t){return this.event_dispatcher_.hasEventListener(t)},o.prototype.dispatchEvent=function(t){return this.event_dispatcher_.dispatchEvent(t)},o.prototype.refresh=function(){for(var t=[],n=0;n<arguments.length;n++)t[n-0]=arguments[n];var o,r;0==t.length?(o=this.begin(),r=this.end()):1==t.length?(o=t[0],r=o.next()):(o=t[0],r=t[1]),this.dispatchEvent(new e.CollectionEvent("refresh",o,r))},o.prototype.addEventListener=function(t,e,n){void 0===n&&(n=null),this.event_dispatcher_.addEventListener(t,e,n)},o.prototype.removeEventListener=function(t,e,n){void 0===n&&(n=null),this.event_dispatcher_.removeEventListener(t,e,n)},o}(std.List);e.ListCollection=n}(e=t.collection||(t.collection={}))}(samchon||(samchon={}));var samchon;!function(t){var e;!function(t){var e=function(t){function e(){t.apply(this,arguments)}return __extends(e,t),Object.defineProperty(e.prototype,"first",{get:function(){return this.first_},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"last",{get:function(){return this.last_},enumerable:!0,configurable:!0}),e}(t.CollectionEvent);t.MapCollectionEvent=e}(e=t.collection||(t.collection={}))}(samchon||(samchon={}));var samchon;!function(t){var e;!function(e){var n=function(n){function o(){n.apply(this,arguments),this.event_dispatcher_=new t.library.EventDispatcher(this)}return __extends(o,n),o.prototype._Handle_insert=function(t,o){n.prototype._Handle_insert.call(this,t,o),e.ICollection._Dispatch_MapCollectionEvent(this,"insert",t,o)},o.prototype._Handle_erase=function(t,o){n.prototype._Handle_erase.call(this,t,o),e.ICollection._Dispatch_MapCollectionEvent(this,"erase",t,o)},o.prototype.hasEventListener=function(t){return this.event_dispatcher_.hasEventListener(t)},o.prototype.dispatchEvent=function(t){return this.event_dispatcher_.dispatchEvent(t)},o.prototype.refresh=function(){for(var t=[],n=0;n<arguments.length;n++)t[n-0]=arguments[n];var o,r;0==t.length?(o=this.begin(),r=this.end()):1==t.length?(o=t[0],r=o.next()):(o=t[0],r=t[1]),this.dispatchEvent(new e.MapCollectionEvent("refresh",o,r))},o.prototype.addEventListener=function(t,e,n){void 0===n&&(n=null),this.event_dispatcher_.addEventListener(t,e,n)},o.prototype.removeEventListener=function(t,e,n){void 0===n&&(n=null),this.event_dispatcher_.removeEventListener(t,e,n)},o}(std.TreeMap);e.TreeMapCollection=n}(e=t.collection||(t.collection={}))}(samchon||(samchon={}));var samchon;!function(t){var e;!function(e){var n=function(n){function o(){n.apply(this,arguments),this.event_dispatcher_=new t.library.EventDispatcher(this)}return __extends(o,n),o.prototype._Handle_insert=function(t,o){n.prototype._Handle_insert.call(this,t,o),e.ICollection._Dispatch_MapCollectionEvent(this,"insert",t,o)},o.prototype._Handle_erase=function(t,o){n.prototype._Handle_erase.call(this,t,o),e.ICollection._Dispatch_MapCollectionEvent(this,"erase",t,o)},o.prototype.hasEventListener=function(t){return this.event_dispatcher_.hasEventListener(t)},o.prototype.dispatchEvent=function(t){return this.event_dispatcher_.dispatchEvent(t)},o.prototype.refresh=function(){for(var t=[],n=0;n<arguments.length;n++)t[n-0]=arguments[n];var o,r;0==t.length?(o=this.begin(),r=this.end()):1==t.length?(o=t[0],r=o.next()):(o=t[0],r=t[1]),this.dispatchEvent(new e.MapCollectionEvent("refresh",o,r))},o.prototype.addEventListener=function(t,e,n){void 0===n&&(n=null),this.event_dispatcher_.addEventListener(t,e,n)},o.prototype.removeEventListener=function(t,e,n){void 0===n&&(n=null),this.event_dispatcher_.removeEventListener(t,e,n)},o}(std.TreeMultiMap);e.TreeMultiMapCollection=n}(e=t.collection||(t.collection={}))}(samchon||(samchon={}));var samchon;!function(t){var e;!function(e){var n=function(n){function o(){n.apply(this,arguments),this.event_dispatcher_=new t.library.EventDispatcher(this)}return __extends(o,n),o.prototype._Handle_insert=function(t,o){n.prototype._Handle_insert.call(this,t,o),e.ICollection._Dispatch_CollectionEvent(this,"insert",t,o)},o.prototype._Handle_erase=function(t,o){n.prototype._Handle_erase.call(this,t,o),e.ICollection._Dispatch_CollectionEvent(this,"erase",t,o)},o.prototype.hasEventListener=function(t){return this.event_dispatcher_.hasEventListener(t)},o.prototype.dispatchEvent=function(t){return this.event_dispatcher_.dispatchEvent(t)},o.prototype.refresh=function(){for(var t=[],n=0;n<arguments.length;n++)t[n-0]=arguments[n];var o,r;0==t.length?(o=this.begin(),r=this.end()):1==t.length?(o=t[0],r=o.next()):(o=t[0],r=t[1]),this.dispatchEvent(new e.CollectionEvent("refresh",o,r))},o.prototype.addEventListener=function(t,e,n){void 0===n&&(n=null),this.event_dispatcher_.addEventListener(t,e,n)},o.prototype.removeEventListener=function(t,e,n){void 0===n&&(n=null),this.event_dispatcher_.removeEventListener(t,e,n)},o}(std.TreeMultiSet);e.TreeMultiSetCollection=n}(e=t.collection||(t.collection={}))}(samchon||(samchon={}));var samchon;!function(t){var e;!function(e){var n=function(n){function o(){n.apply(this,arguments),this.event_dispatcher_=new t.library.EventDispatcher(this)}return __extends(o,n),o.prototype._Handle_insert=function(t,o){n.prototype._Handle_insert.call(this,t,o),e.ICollection._Dispatch_CollectionEvent(this,"insert",t,o)},o.prototype._Handle_erase=function(t,o){n.prototype._Handle_erase.call(this,t,o),e.ICollection._Dispatch_CollectionEvent(this,"erase",t,o)},o.prototype.hasEventListener=function(t){return this.event_dispatcher_.hasEventListener(t)},o.prototype.dispatchEvent=function(t){return this.event_dispatcher_.dispatchEvent(t)},o.prototype.refresh=function(){for(var t=[],n=0;n<arguments.length;n++)t[n-0]=arguments[n];var o,r;0==t.length?(o=this.begin(),r=this.end()):1==t.length?(o=t[0],r=o.next()):(o=t[0],r=t[1]),this.dispatchEvent(new e.CollectionEvent("refresh",o,r))},o.prototype.addEventListener=function(t,e,n){void 0===n&&(n=null),this.event_dispatcher_.addEventListener(t,e,n)},o.prototype.removeEventListener=function(t,e,n){void 0===n&&(n=null),this.event_dispatcher_.removeEventListener(t,e,n)},o}(std.TreeSet);e.TreeSetCollection=n}(e=t.collection||(t.collection={}))}(samchon||(samchon={}));var samchon;!function(t){var e;!function(t){var e=function(){function t(t,e){this.n_=t,this.r_=e}return t.prototype.size=function(){return this.size_},t.prototype.n=function(){return this.n_},t.prototype.r=function(){return this.r_},t}();t.CaseGenerator=e;var n=function(t){function e(e,n){t.call(this,e,n),this.size_=Math.pow(e,n),this.divider_array=new Array;for(var o=0;o<n;o++){var r=n-(o+1),i=Math.pow(e,r);this.divider_array.push(i)}}return __extends(e,t),e.prototype.at=function(t){for(var e=[],n=0;n<this.r_;n++){var o=Math.floor(t/this.divider_array[n])%this.n_;e.push(o)}return e},e}(e);t.CombinedPermutationGenerator=n;var o=function(t){function e(e,n){t.call(this,e,n),this.size_=e;for(var o=e-1;o>e-n;o--)this.size_*=o}return __extends(e,t),e.prototype.at=function(t){for(var e=[],n=0;n<this.n_;n++)e.push(n);for(var o=[],n=0;n<this.r_;n++){var r=t%e.length;t=Math.floor(t/e.length),o.push(e[r]),e.splice(r,1)}return o},e}(e);t.PermuationGenerator=o;var r=function(t){function e(e){t.call(this,e,e)}return __extends(e,t),e}(o);t.FactorialGenerator=r}(e=t.library||(t.library={}))}(samchon||(samchon={}));var samchon;!function(t){var e;!function(t){var e=function(){function t(t){void 0===t&&(t=null),null==t?this.event_dispatcher_=this:this.event_dispatcher_=t,this.event_listeners_=new std.HashMap}return t.prototype.hasEventListener=function(t){return t=t.toLowerCase(),this.event_listeners_.has(t)},t.prototype.dispatchEvent=function(t){if(t.target=this.event_dispatcher_,0==this.event_listeners_.has(t.type))return!1;for(var e=this.event_listeners_.get(t.type),n=e.begin();0==n.equal_to(e.end());n=n.next())1!=t.defaultPrevented&&n.value.first.apply(n.value.second,[t]);return!0},t.prototype.addEventListener=function(t,e,n){void 0===n&&(n=null),t=t.toLowerCase();var o;0==this.event_listeners_.has(t)?(o=new std.HashSet,this.event_listeners_.set(t,o)):o=this.event_listeners_.get(t),o.insert(new std.Pair(e,n))},t.prototype.removeEventListener=function(t,e,n){if(void 0===n&&(n=null),t=t.toLowerCase(),0!=this.event_listeners_.has(t)){var o=this.event_listeners_.get(t),r=new std.Pair(e,n);0!=o.has(r)&&(o.erase(r),1==o.empty()&&this.event_listeners_.erase(t))}},t}();t.EventDispatcher=e}(e=t.library||(t.library={}))}(samchon||(samchon={}));var samchon;!function(t){var e;!function(t){var e=function(e){function n(){e.call(this),this.file_=null,this.data_=null}return __extends(n,e),Object.defineProperty(n.prototype,"data",{get:function(){return this.data_},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"name",{get:function(){var t=this.file_.name.lastIndexOf(".");return t==-1?this.file_.name:this.file_.name.substr(0,t)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"extension",{get:function(){var t=this.file_.name.lastIndexOf(".");return t==-1?null:this.file_.name.substr(t+1)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"type",{get:function(){return this.file_.type},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"size",{get:function(){return this.file_.size},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"modificationDate",{get:function(){return this.file_.lastModifiedDate},enumerable:!0,configurable:!0}),n.prototype.browse=function(){for(var e=[],n=0;n<arguments.length;n++)e[n-0]=arguments[n];var o=this,r=document.createElement("input");r.type="file",e.length>0&&(r.accept=e.toString()),r.onchange=function(e){o.file_=r.files[0],o.dispatchEvent(new t.BasicEvent("select"))},r.onclick=function(t){document.body.removeChild(t.target)},r.style.display="none",document.body.appendChild(r),r.click()},n.prototype.load=function(){var e=this,n=new FileReader;n.onload=function(o){e.data_=n.result,e.dispatchEvent(new t.BasicEvent("complete"))},n.readAsText(this.file_)},n.prototype.save=function(t,e){n.save(t,e)},n.save=function(t,e){var n=new Blob([t],{type:"text/plain"});if(void 0!=window.navigator.msSaveBlob)window.navigator.msSaveBlob(n,e);else{var o=document.createElement("a");o.download=e,o.innerHTML="",o.href=window.URL.createObjectURL(n),o.onclick=function(t){document.body.removeChild(t.target)},o.style.display="none",document.body.appendChild(o),o.click()}},n}(t.EventDispatcher);t.FileReference=e;var n=function(n){function o(){n.call(this),this.file_list=new std.Vector}return __extends(o,n),Object.defineProperty(o.prototype,"fileList",{get:function(){return this.file_list},enumerable:!0,configurable:!0}),o.prototype.browse=function(){for(var n=[],o=0;o<arguments.length;o++)n[o-0]=arguments[o];var r=this,i=document.createElement("input");i.type="file",n.length>0&&(i.accept=n.toString()),i.onchange=function(n){var o=i.files;r.file_list.clear();for(var s=0;s<o.length;s++){var a=new e;a.file_=o[s],r.file_list.push(a)}r.dispatchEvent(new t.BasicEvent("select"))},i.onclick=function(t){document.body.removeChild(t.target)},i.style.display="none",document.body.appendChild(i),i.click()},o}(t.EventDispatcher);t.FileReferenceList=n}(e=t.library||(t.library={}))}(samchon||(samchon={}));var samchon;!function(samchon){var library;!function(library){var GeneticAlgorithm=function(){function t(t,e,n){void 0===t&&(t=!0),void 0===e&&(e=.015),void 0===n&&(n=10),this.unique_=t,this.mutation_rate_=e,this.tournament_=n}return t.prototype.evolveGeneArray=function(t,e,n,o){void 0===o&&(o=std.greater);for(var r=new GAPopulation(t,e),i=0;i<n;i++)r=this.evolvePopulation(r);return r.fitTest()},t.prototype.evolvePopulation=function(t,e){void 0===e&&(e=std.greater);var n=t.children().size(),o=new GAPopulation(n);o.children().set(0,t.fitTest());for(var r=1;r<n;r++){var i=this.selection(t),s=this.selection(t),a=this.crossover(i,s);this.mutate(a),o.children().set(r,a)}return o},t.prototype.selection=function(t){for(var e=t.children().size(),n=new GAPopulation(e),o=0;o<e;o++){var r=Math.floor(Math.random()*e);r==e&&r--,n.children().set(o,t.children().at(r))}return n.fitTest()},t.prototype.crossover=function(t,e){var n=t.constructor(t),o=t.size();if(0==this.unique_)for(var r=0;r<o;r++)Math.random()>.5&&n.set(r,t.at(r));else{var i=new std.HashSet,s=new std.HashSet,a=Math.random()*o,c=Math.random()*o;a>c&&(l=[c,a],a=l[0],c=l[1]);for(var r=0;r<o;r++)a<=r&&r<c?i.insert(t.at(r)):s.insert(r);for(var r=0;r<o;r++){var h=e.at(r);0!=i.find(h).equal_to(i.end())&&(n.set(s.begin().value,h),s.erase(s.begin()))}}return n;var l},t.prototype.mutate=function(t){for(var e=t.begin();!e.equal_to(t.end());e=e.next())if(!(Math.random()>this.mutation_rate_)){var n=Math.floor(Math.random()*t.size());e.swap(t.begin().advance(n))}},t}();library.GeneticAlgorithm=GeneticAlgorithm;var GAPopulation=function(){function GAPopulation(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];if(1==t.length)this.children_=new std.Vector,this.children_.length=t[0];else{var n=t[0],o=t[1],r=2==t.length?std.greater:t[2];this.children_=new std.Vector,this.children_.length=t[1],this.compare_=r;for(var i=0;i<o;i++){var s=this.clone(n);i>0&&std.random_shuffle(s.begin(),s.end()),this.children_[i]=s}}}return GAPopulation.prototype.children=function(){return this.children_},GAPopulation.prototype.fitTest=function(){for(var t=this.children_.front(),e=1;e<this.children_.size();e++)1==this.compare_(this.children_.at(e),t)&&(t=this.children_.at(e));return t},GAPopulation.prototype.clone=function(obj){var ret=eval("new obj.constructor()");for(var key in obj)1==obj.hasOwnProperty(key)&&(ret[key]=obj[key]);return ret},GAPopulation}();library.GAPopulation=GAPopulation}(library=samchon.library||(samchon.library={}))}(samchon||(samchon={}));var samchon;!function(t){var e;!function(t){var e=function(){function t(){}return t.between=function(t,e,n){if(void 0===e&&(e=""),void 0===n&&(n=""),""==e&&""==n)return t;if(""==e)return t.substr(0,t.indexOf(n));if(""==n)return t.substr(t.indexOf(e)+e.length);var o=t.indexOf(e);return o==-1?"":t.substring(o+e.length,t.indexOf(n,o+e.length))},t.betweens=function(e,n,o){void 0===n&&(n=""),void 0===o&&(o="");var r=[];if(""==n&&""==o)return[e];if(n==o)for(var i=-1,s=void 0,a=0;(s=e.indexOf(n,i+1))!=-1;)++a%2==0&&r.push(e.substring(i,s)),s=i;else if(r=e.split(n).splice(1),""!=o)for(var c=r.length-1;c>=0;c--)r[c].indexOf(o)==-1?r.splice(c,1):r[c]=t.between(r[c],"",o);return r},t.trim=function(e){for(var n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];return 0==n.length&&(n=t.SPACE_ARRAY),t.ltrim.apply(t,[t.rtrim.apply(t,[e].concat(n))].concat(n))},t.ltrim=function(e){for(var n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];0==n.length&&(n=t.SPACE_ARRAY);for(var r=0;r<e.length;){for(var i=r,s=0;s<n.length;s++){var a=e.indexOf(n[s],i)+n[s].length;i=Math.max(i,a)}if(i<=r)break;r=i}return r==e.length?"":e.substr(r)},t.rtrim=function(e){for(var n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];0==n.length&&(n=t.SPACE_ARRAY);for(var r=e.length;0!=r;){for(var i=r,s=0;s<n.length;s++){var a=e.lastIndexOf(n[s],i-1);a!=-1&&(i=Math.min(i,a))}if(i==-1||i>=r)break;r=i}return e.substr(0,r)},t.substitute=function(e){for(var n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];for(;;){if(0==n.length)break;for(var r=t.betweens(e,"{","}"),i=Number.MAX_VALUE,s=0;s<r.length;s++){var a=Number(r[s]);1!=isNaN(a)&&(i=Math.min(i,a))}if(i==Number.MAX_VALUE)break;e=t.replaceAll(e,"{"+i+"}",n[0]),n.shift()}return e},t.replaceAll=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(2==e.length&&"string"==typeof e[0]){var o=e[0],r=e[1];return t.split(o).join(r)}if(0==e.length)return t;for(var i=0;i<e.length;i++){var s=e[i];t=t.split(s.first).join(s.second)}return t},t.removeHTMLSpaces=function(e){return t.replaceAll(e,new std.Pair("&nbsp;"," "),new std.Pair("\t"," "),new std.Pair("  "," "))},t.repeat=function(t,e){for(var n="",o=0;o<e;o++)n+=t;return n},t.numberFormat=function(e,n){void 0===n&&(n=2);var o="";e=Math.round(e*Math.pow(10,n)),e/=Math.pow(10,n);var r=e<0,i=Math.floor(Math.abs(e)),s=Math.abs(e)-Math.floor(Math.abs(e));if(0==i)o="0";else for(var a=Math.floor(Math.log(i)/Math.log(10))+1,c=0;c<=a;c++){var h=Math.floor(i%Math.pow(10,c+1));h=Math.floor(h/Math.pow(10,c)),c==a&&0==h||(c>0&&c%3==0&&(o=","+o),o=h+o)}if(1==r&&(o="-"+o),n>0&&0!=s){s=Math.round(s*Math.pow(10,n));var l=n-Math.floor(Math.log(s)/Math.log(10))-1;o+="."+t.repeat("0",l)+s}return o},t.percentFormat=function(e,n){return void 0===n&&(n=2),t.numberFormat(100*e,n)+" %"},t.SPACE_ARRAY=[" ","\t","\r","\n"],t}();t.StringUtil=e}(e=t.library||(t.library={}));
}(samchon||(samchon={}));var samchon;!function(t){var e;!function(t){var e=function(t){function e(e){void 0===e&&(e=""),t.call(this),""!=e&&this.decode(e)}return __extends(e,t),e.prototype.decode=function(t){if(this.clear(),""!=t.trim()){t.indexOf("?")!=-1&&(t=t.substr(t.indexOf("?")+1));for(var e=t.split("&"),n=0;n<e.length;n++){var o=e[n].indexOf("="),r=void 0,i=void 0;o==-1?(r=e[n],i=""):(r=e[n].substr(0,o),i=decodeURIComponent(e[n].substr(o+1))),this.insert([r,i])}}},e.prototype.toString=function(){for(var t="",e=this.begin();!e.equal_to(this.end());e=e.next())e.equal_to(this.begin())||(t+="&"),t+=e.first+"="+encodeURIComponent(e.second);return t},e}(std.HashMap);t.URLVariables=e}(e=t.library||(t.library={}))}(samchon||(samchon={}));var samchon;!function(t){var e;!function(t){var e=function(e){function o(t){if(void 0===t&&(t=""),e.call(this),this.property_map_=new std.HashMap,this.value_="",t.indexOf("<")!=-1){var n,o;for((n=t.indexOf("<?xml"))!=-1&&(o=t.indexOf("?>",n),o!=-1&&(t=t.substr(o+2)));(n=t.indexOf("<!--"))!=-1&&(o=t.indexOf("-->",n),o==-1);)t=t.substr(0,n)+t.substr(o+3);this.construct(t)}}return __extends(o,e),o.prototype.construct=function(t){this.parseTag(t),this.parseProperty(t);var e=this.parseValue(t);1==e.second&&this.parseChildren(e.first)},o.prototype.parseTag=function(t){var e=t.indexOf("<")+1,n=this.calcMinIndex(t.indexOf(" ",e),t.indexOf("\r\n",e),t.indexOf("\n",e),t.indexOf("\t",e),t.indexOf(">",e),t.indexOf("/",e));0!=e&&n!=-1&&(this.tag_=t.substring(e,n))},o.prototype.parseProperty=function(t){var e=t.indexOf("<"+this.tag_)+this.tag_.length+1,n=this.calcMinIndex(t.lastIndexOf("/"),t.indexOf(">",e));if(!(e==-1||n==-1||e>=n)){var r=t.substring(e,n);if(r.indexOf("=")!=-1){for(var i,s,a,c,h=[],l=!1,p=0;p<r.length;p++)0!=l||"'"!=r.charAt(p)&&'"'!=r.charAt(p)?1==l&&(1==a&&"'"==r.charAt(p)||2==a&&'"'==r.charAt(p))&&(h.push({type:a,start:e,end:p}),l=!1):(l=!0,e=p,"'"==r.charAt(p)?a=1:'"'==r.charAt(p)&&(a=2));for(var p=0;p<h.length;p++){h[p];0==p?(c=r.indexOf("="),i=r.substring(0,c).trim()):(c=r.indexOf("=",h[p-1].end+1),i=r.substring(h[p-1].end+1,c).trim()),s=r.substring(h[p].start+1,h[p].end),this.setProperty(i,o.decodeProperty(s))}}}},o.prototype.parseValue=function(t){var e=t.lastIndexOf("/"),n=t.indexOf(">");if(e<n||e+1==t.lastIndexOf("<"))return this.value_="",new std.Pair(t,!1);var r=n+1,i=t.lastIndexOf("<");return t=t.substring(r,i),t.indexOf("<")==-1?this.value_=o.decodeValue(t.trim()):this.value_="",new std.Pair(t,!0)},o.prototype.parseChildren=function(t){if(t.indexOf("<")!=-1){var e=t.indexOf("<"),r=t.lastIndexOf(">")+1;t=t.substring(e,r);var i=0,s=0;e=0;for(var a=0;a<t.length;a++)if("<"==t.charAt(a)&&"</"!=t.substr(a,2)?i++:"/>"!=t.substr(a,2)&&"</"!=t.substr(a,2)||s++,i>=1&&i==s){r=t.indexOf(">",a);var c=void 0,h=new o;h.construct(t.substring(e,r+1)),1==this.has(h.tag_)?c=this.get(h.tag_):(c=new n,this.set(h.tag_,c)),c.push(h),a=r,e=r+1,i=0,s=0}}},o.prototype.getTag=function(){return this.tag_},o.prototype.getValue=function(){return this.value_},o.prototype.hasProperty=function(t){return this.property_map_.has(t)},o.prototype.getProperty=function(t){return this.property_map_.get(t)},o.prototype.getPropertyMap=function(){return this.property_map_},o.prototype.setTag=function(t){this.tag_=t},o.prototype.setValue=function(t){this.value_=t},o.prototype.setProperty=function(t,e){this.property_map_.set(t,e)},o.prototype.eraseProperty=function(t){if(0==this.property_map_.has(t))throw Error("out of range");this.property_map_.erase(t)},o.prototype.push=function(){for(var t=[],r=0;r<arguments.length;r++)t[r-0]=arguments[r];for(var i=0;i<t.length;i++)if(t[i]instanceof o){var s=t[i];if(1==this.has(s.tag_))this.get(s.tag_).push(s);else{var a=new n;a.push(s),this.set(s.tag_,a)}}else if(t[i]instanceof n){var a=t[i];if(1==a.empty())continue;if(1==this.has(a.getTag())){var c=this.get(a.getTag());c.insert(c.end(),a.begin(),a.end())}else this.set(a.getTag(),a)}else e.prototype.push.call(this,t[i]);return this.size()},o.prototype.addAllProperties=function(t){for(var e=t.property_map_.begin();0==e.equal_to(t.property_map_.end());e=e.next())this.setProperty(e.first,e.second)},o.prototype.clearProperties=function(){this.property_map_.clear()},o.prototype.calcMinIndex=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];for(var n=t[0],o=1;o<t.length;o++)t[o]!=-1&&(n==-1||t[o]<n)&&(n=t[o]);return n},o.decodeValue=function(e){var n=[new std.Pair("&amp;","&"),new std.Pair("&lt;","<"),new std.Pair("&gt;",">")];return t.StringUtil.replaceAll.apply(t.StringUtil,[e].concat(n))},o.encodeValue=function(e){var n=[new std.Pair("&","&amp;"),new std.Pair("<","&lt;"),new std.Pair(">","&gt;")];return t.StringUtil.replaceAll.apply(t.StringUtil,[e].concat(n))},o.decodeProperty=function(e){var n=[new std.Pair("&amp;","&"),new std.Pair("&lt;","<"),new std.Pair("&gt;",">"),new std.Pair("&quot;",'"'),new std.Pair("&apos;","'"),new std.Pair("&#x9;","\t"),new std.Pair("&#xA;","\n"),new std.Pair("&#xD;","\r")];return t.StringUtil.replaceAll.apply(t.StringUtil,[e].concat(n))},o.encodeProperty=function(e){var n=[new std.Pair("&","&amp;"),new std.Pair("<","&lt;"),new std.Pair(">","&gt;"),new std.Pair('"',"&quot;"),new std.Pair("'","&apos;"),new std.Pair("\t","&#x9;"),new std.Pair("\n","&#xA;"),new std.Pair("\r","&#xD;")];return t.StringUtil.replaceAll.apply(t.StringUtil,[e].concat(n))},o.prototype.toString=function(e){void 0===e&&(e=0);for(var n=t.StringUtil.repeat("\t",e)+"<"+this.tag_,r=this.property_map_.begin();0==r.equal_to(this.property_map_.end());r=r.next())n+=" "+r.first+'="'+o.encodeProperty(String(r.second))+'"';if(0==this.size())n+=""!=this.value_?">"+o.encodeValue(String(this.value_))+"</"+this.tag_+">":" />";else{n+=">\n";for(var i=this.begin();0==i.equal_to(this.end());i=i.next())n+=i.second.toString(e+1);n+=t.StringUtil.repeat("\t",e)+"</"+this.tag_+">"}return n},o.prototype.toHTML=function(e){void 0===e&&(e=0);for(var n=t.StringUtil.repeat("&nbsp;&nbsp;&nbsp;&nbsp;",e)+"&lt;"+this.tag_,r=this.property_map_.begin();0==r.equal_to(this.property_map_.end());r=r.next())n+=" "+r.first+"=&quot;"+o.encodeProperty(String(r.second))+"&quot;";if(0==this.size())n+=""!=this.value_?"&gt;"+o.encodeValue(String(this.value_))+"</"+this.tag_+">":" /&gt;";else{n+="&gt;<br>\n";for(var i=this.begin();0==i.equal_to(this.end());i=i.next())n+=i.second.toHTML(e+1);n+=t.StringUtil.repeat("&nbsp;&nbsp;&nbsp;&nbsp;",e)+"&lt;/"+this.tag_+"&gt;"}return n},o}(std.HashMap);t.XML=e;var n=function(t){function e(){t.apply(this,arguments)}return __extends(e,t),e.prototype.getTag=function(){return 0==this.size()?null:this.at(0).getTag()},e.prototype.toString=function(t){void 0===t&&(t=0);for(var e="",n=0;n<this.size();n++)e+=this.at(n).toString(t)+"\n";return e},e.prototype.toHTML=function(t){void 0===t&&(t=0);for(var e="",n=0;n<this.size();n++)e+=this.at(n).toHTML(t)+"<br>\n";return e},e}(std.Deque);t.XMLList=n}(e=t.library||(t.library={}))}(samchon||(samchon={}));var samchon;!function(t){var e;!function(e){var n;!function(e){function n(t,e){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];for(var r=e.getPropertyMap(),i=r.begin();!i.equal_to(r.end());i=i.next())if(void 0!=t[i.first]){for(var s=!1,a=0;a<n.length;a++)if(n[a]==i.first){s=!0;break}1!=s&&("string"==typeof t[i.first]?t[i.first]=i.second:"number"==typeof t[i.first]?t[i.first]=Number(i.second):"boolean"==typeof t[i.first]&&(t[i.first]="true"==i.second))}}function o(e){for(var n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];var r=new t.library.XML;r.setTag(e.TAG());for(var i in e)if("string"==typeof i&&("string"==typeof e[i]||"number"==typeof e[i]||"boolean"==typeof e[i])&&e.hasOwnProperty(i)){if(""==i||"_"==i.charAt(0)||"_"==i.charAt(i.length-1))continue;for(var s=!1,a=0;a<n.length;a++)if(n[a]==i){s=!0;break}if(1==s)continue;r.setProperty(i,String(e[i]))}return r}e.construct=n,e.toXML=o}(n=e.IEntity||(e.IEntity={}));var o=function(){function t(){}return t.prototype.construct=function(t){n.construct(this,t)},t.prototype.key=function(){return""},t.prototype.toXML=function(){return n.toXML(this)},t}();e.Entity=o}(e=t.protocol||(t.protocol={}))}(samchon||(samchon={}));try{module.exports=samchon}catch(t){}var samchon;!function(t){var e;!function(e){var n=function(){function n(t){void 0===t&&(t=null),this.listener_=t,this.onClose=null,this.binary_invoke_=null,this.binary_parameters_=new std.Queue,this.unhandled_invokes=new std.Deque}return n.prototype.isConnected=function(){return this.connected_},n.prototype.is_binary_invoke=function(){return null!=this.binary_invoke_},n.prototype.replyData=function(t){null==this.listener_?this.unhandled_invokes.push_back(t):this.listener_._replyData instanceof Function?this.listener_._replyData(t):this.listener_.replyData(t)},n.prototype.handle_string=function(n){var o=new e.Invoke;o.construct(new t.library.XML(n));for(var r=0;r<o.size();r++){var i=o.at(r);"ByteArray"==i.getType()&&(null==this.binary_invoke_&&(this.binary_invoke_=o),this.binary_parameters_.push(i))}null==this.binary_invoke_&&this.replyData(o)},n.prototype.handle_binary=function(t){var e=this.binary_parameters_.front();if(e.setValue(t),this.binary_parameters_.pop(),1==this.binary_parameters_.empty()){var n=this.binary_invoke_;this.binary_invoke_=null,this.replyData(n)}},n}();e.CommunicatorBase=n}(e=t.protocol||(t.protocol={}))}(samchon||(samchon={}));var samchon;!function(t){var e;!function(t){var e=function(t){function e(){t.apply(this,arguments),this.socket_=null,this.header_bytes_=null,this.data_=null,this.data_index_=-1,this.listening_=!1}return __extends(e,t),e.prototype.close=function(){this.socket_.end()},e.prototype.start_listen=function(){1!=this.listening_&&(this.listening_=!0,this.socket_.on("data",this.listen_piece.bind(this)),this.socket_.on("error",this.handle_error.bind(this)),this.socket_.on("end",this.handle_close.bind(this)),this.socket_.on("close",this.handle_close.bind(this)))},e.prototype.handle_error=function(){},e.prototype.handle_close=function(){this.connected_=!1,null!=this.onClose&&this.onClose()},e.prototype.sendData=function(t){var e=new Buffer(8),n=t.toXML().toString();e.writeUInt32BE(0,0),e.writeUInt32BE(n.length,4),this.socket_.write(e),this.socket_.write(n,"binary");for(var o=0;o<t.size();o++){var r=t.at(o);if("ByteArray"==r.getType()){var i=new Buffer(8),s=r.getValue();i.writeUInt32BE(0,0),i.writeUInt32BE(s.byteLength,4),this.socket_.write(i),this.socket_.write(s)}}},e.prototype.listen_piece=function(t){null==this.data_?this.listen_header(t,0):this.listen_data(t,0)},e.prototype.listen_header=function(t,e){if(null!=this.header_bytes_&&(this.header_bytes_.copy(t,e,0,this.header_bytes_.byteLength),this.header_bytes_=null),e>t.byteLength-8)return this.header_bytes_=new Buffer(8),void t.copy(this.header_bytes_,0,e,t.byteLength-e);var n=t.readUInt32BE(e+4);this.data_=new Buffer(n),this.data_index_=0,e+=8,e<t.byteLength&&this.listen_data(t,e)},e.prototype.listen_data=function(t,e){var n=Math.min(this.data_.byteLength-this.data_index_,t.byteLength-e);t.copy(this.data_,this.data_index_,e,e+n),this.data_index_+=n,e+=n,this.data_index_==this.data_.byteLength&&(0==this.is_binary_invoke()?this.handle_string(this.data_.toString()):this.handle_binary(this.data_),this.data_=null,this.data_index_=-1),e<t.byteLength&&this.listen_header(t,e)},e}(t.CommunicatorBase);t.Communicator=e}(e=t.protocol||(t.protocol={}))}(samchon||(samchon={}));var samchon;!function(t){var e;!function(t){var e=function(t){function e(){t.apply(this,arguments),this.connection_=null}return __extends(e,t),e.prototype.close=function(){this.connection_.close()},e.prototype.sendData=function(t){this.connection_.sendUTF(t.toXML().toString());for(var e=0;e<t.size();e++)"ByteArray"==t.at(e).getType()&&this.connection_.sendBytes(t.at(e).getValue())},e.prototype.handle_message=function(t){"utf8"==t.type?this.handle_string(t.utf8Data):this.handle_binary(t.binaryData)},e.prototype.handle_close=function(){this.connected_=!1,null!=this.onClose&&this.onClose()},e}(t.CommunicatorBase);t.WebCommunicator=e}(e=t.protocol||(t.protocol={}))}(samchon||(samchon={}));var samchon;!function(t){var e;!function(t){var e=function(t){function e(){t.apply(this,arguments)}return __extends(e,t),e.prototype.close=function(){this.connected_=!1,this.port_.close(),null!=this.onClose&&this.onClose()},e.prototype.sendData=function(t){this.port_.postMessage(t.toXML().toString());for(var e=0;e<t.size();e++)"ByteaArray"==t.at(e).getType()&&this.port_.postMessage(t.at(e).getValue())},e.prototype.handle_message=function(t){0==this.is_binary_invoke()?this.handle_string(t.data):this.handle_binary(t.data)},e}(t.CommunicatorBase);t.SharedWorkerCommunicator=e}(e=t.protocol||(t.protocol={}))}(samchon||(samchon={}));var samchon;!function(t){var e;!function(t){var e=function(t){function e(e){t.call(this),this.socket_=e,this.connected_=!0}return __extends(e,t),e.prototype.listen=function(t){this.listener_=t,this.start_listen()},e}(t.Communicator);t.ClientDriver=e}(e=t.protocol||(t.protocol={}))}(samchon||(samchon={}));var samchon;!function(t){var e;!function(t){var e=function(t){function e(e,n,o){t.call(this),this.connection_=e,this.path_=n,this.session_id_=o,this.listening_=!1}return __extends(e,t),e.prototype.listen=function(t){this.listener_=t,1!=this.listening_&&(this.listening_=!0,this.connection_.on("message",this.handle_message.bind(this)),this.connection_.on("close",this.handle_close.bind(this)),this.connection_.on("error",this.handle_close.bind(this)))},e.prototype.getPath=function(){return this.path_},e.prototype.getSessionID=function(){return this.session_id_},e}(t.WebCommunicator);t.WebClientDriver=e}(e=t.protocol||(t.protocol={}))}(samchon||(samchon={}));var samchon;!function(t){var e;!function(t){var e=function(t){function e(e){t.call(this),this.port_=e,this.connected_=!0,this.listening_=!1}return __extends(e,t),e.prototype.listen=function(t){this.listener_=t,1!=this.listening_&&(this.listening_=!0,this.port_.onmessage=this.handle_message.bind(this))},e}(t.SharedWorkerCommunicator);t.SharedWorkerClientDriver=e}(e=t.protocol||(t.protocol={}))}(samchon||(samchon={}));var samchon;!function(t){var e;!function(t){var e=function(){function t(){this.communicator_=new n(this)}return t.prototype.sendData=function(t){postMessage(t.toXML().toString(),"");for(var e=0;e<t.size();e++)"ByteArray"==t.at(e).getType()&&postMessage(t.at(e).getValue(),"")},t}();t.DedicatedWorker=e;var n=function(t){function e(e){t.call(this,e),onmessage=this.handle_message.bind(this),this.connected_=!0}return __extends(e,t),e.prototype.close=function(){},e.prototype.isConnected=function(){return this.connected_},e.prototype.sendData=function(t){postMessage(t.toXML().toString(),"");for(var e=0;e<t.size();e++)"ByteArray"==t.at(e).getType()&&postMessage(t.at(e).getValue(),"")},e.prototype.handle_message=function(t){0==this.is_binary_invoke()?this.handle_string(t.data):this.handle_binary(t.data)},e}(t.CommunicatorBase)}(e=t.protocol||(t.protocol={}))}(samchon||(samchon={}));var samchon;!function(t){var e;!function(t){var e=function(t){function e(e){t.call(this,e),this.worker=null,this.onConnect=null,this.onClose=null,this.connected_=!1}return __extends(e,t),e.prototype.connect=function(t){this.worker=new Worker(t),this.worker.onmessage=this.handle_message.bind(this),this.connected_=!0,null!=this.onConnect&&this.onConnect()},e.prototype.close=function(){null!=this.worker&&(this.worker.terminate(),this.connected_=!1,null!=this.onClose&&this.onClose())},e.prototype.sendData=function(t){this.worker.postMessage(t.toXML().toString(),"");for(var e=0;e<t.size();e++)"ByteArray"==t.at(e).getType()&&this.worker.postMessage(t.at(e).getValue(),"")},e.prototype.replyData=function(t){this.listener_.replyData(t)},e.prototype.handle_message=function(t){0==this.is_binary_invoke()?this.handle_string(t.data):this.handle_binary(t.data)},e}(t.CommunicatorBase);t.DedicatedWorkerConnector=e}(e=t.protocol||(t.protocol={}))}(samchon||(samchon={}));var samchon;!function(t){var e;!function(t){var e;!function(e){var n=function(t){function e(e){t.call(this),this.system=e}return __extends(e,t),e.prototype.key=function(){return this.name},e.prototype.getSystem=function(){return this.system},e.prototype.getName=function(){return this.name},e.prototype.sendData=function(t){this.system.sendData(t)},e.prototype.replyData=function(t){t.apply(this)},e.prototype.TAG=function(){return"role"},e}(t.Entity);e.ExternalSystemRole=n}(e=t.external||(t.external={}))}(e=t.protocol||(t.protocol={}))}(samchon||(samchon={}));var samchon;!function(t){var e;!function(t){var e;!function(e){var n=function(n){function o(t){n.call(this,null),this.system_array_=t,this.resource=1,this.progress_list_=new std.HashMap,this.history_list_=new std.HashMap}return __extends(o,n),o.prototype.getSystemArray=function(){return this.system_array_},o.prototype.getResource=function(){return this.resource},o.prototype.setResource=function(t){this.resource=t},o.prototype.compute_average_elapsed_time=function(){for(var t=0,e=this.history_list_.begin();!e.equal_to(this.history_list_.end());e=e.next()){var n=e.second;t+=n.computeElapsedTime()*n.getSystem().getPerformance()}return t/this.history_list_.size()},o.prototype.sendData=function(n){if(1!=this.system_array_.empty()){var o;0==n.has("_History_uid")?(o=++this.system_array_.history_sequence_,n.push_back(new t.InvokeParameter("_History_uid",o))):(o=n.get("_History_uid").getValue(),this.system_array_.history_sequence_=o,this.progress_list_.erase(o)),0==n.has("_Role_name")&&n.push_back(new t.InvokeParameter("_Role_name",this.name));for(var r=null,i=0;i<this.system_array_.size();i++){var s=this.system_array_.at(i);1!=s.exclude_&&(null==r||s.progress_list_.size()<r.progress_list_.size()||s.getPerformance()<r.getPerformance())&&(r=s)}var a=new e.DSInvokeHistory(r,this,n);this.progress_list_.insert([o,a]),r.progress_list_.insert([o,std.make_pair(n,a)]),r.sendData(n)}},o.prototype.complete_history=function(t){this.progress_list_.erase(t.getUID()),this.history_list_.insert([t.getUID(),t])},o}(t.external.ExternalSystemRole);e.DistributedSystemRole=n}(e=t.distributed||(t.distributed={}))}(e=t.protocol||(t.protocol={}))}(samchon||(samchon={}));var samchon;!function(t){var e;!function(e){var n=function(t){function n(){t.apply(this,arguments)}return __extends(n,t),n.prototype.construct=function(t){e.IEntityGroup.construct(this,t,"length")},n.prototype.key=function(){return""},n.prototype.has=function(t){return e.IEntityGroup.has(this,t)},n.prototype.count=function(t){return e.IEntityGroup.count(this,t)},n.prototype.get=function(t){return e.IEntityGroup.get(this,t)},n.prototype.toXML=function(){return e.IEntityGroup.toXML(this,"length")},n}(t.collection.ArrayCollection);e.EntityArrayCollection=n}(e=t.protocol||(t.protocol={}))}(samchon||(samchon={}));var samchon;!function(t){var e;!function(e){var n=function(t){function n(){t.apply(this,arguments)}return __extends(n,t),n.prototype.construct=function(t){e.IEntityGroup.construct(this,t)},n.prototype.key=function(){return""},n.prototype.has=function(t){return e.IEntityGroup.has(this,t)},n.prototype.count=function(t){return e.IEntityGroup.count(this,t)},n.prototype.get=function(t){return e.IEntityGroup.get(this,t)},n.prototype.toXML=function(){return e.IEntityGroup.toXML(this)},n}(t.collection.ListCollection);e.EntityListCollection=n}(e=t.protocol||(t.protocol={}))}(samchon||(samchon={}));var samchon;!function(t){var e;!function(e){var n=function(t){function n(){t.apply(this,arguments)}return __extends(n,t),n.prototype.construct=function(t){e.IEntityGroup.construct(this,t)},n.prototype.key=function(){return""},n.prototype.has=function(t){return e.IEntityGroup.has(this,t)},n.prototype.count=function(t){return e.IEntityGroup.count(this,t)},n.prototype.get=function(t){return e.IEntityGroup.get(this,t)},n.prototype.toXML=function(){return e.IEntityGroup.toXML(this)},n}(t.collection.DequeCollection);e.EntityDequeCollection=n}(e=t.protocol||(t.protocol={}))}(samchon||(samchon={}));var samchon;!function(t){var e;!function(t){var e;!function(e){var n=function(t){function e(){t.call(this),this.addEventListener("erase",this.handle_system_erase,this)}return __extends(e,t),e.prototype.handle_system_erase=function(t){for(var e=t.first;!e.equal_to(t.last);e=e.next())e.value.destructor()},e.prototype.hasRole=function(t){for(var e=0;e<this.size();e++)for(var n=0;n<this.at(e).size();n++)if(this.at(e).at(n).key()==t)return!0;return!1},e.prototype.getRole=function(t){for(var e=0;e<this.size();e++)for(var n=0;n<this.at(e).size();n++)if(this.at(e).at(n).key()==t)return this.at(e).at(n);throw new std.OutOfRange("No role with such name.")},e.prototype.sendData=function(t){for(var e=0;e<this.size();e++)this.at(e).sendData(t)},e.prototype.replyData=function(t){t.apply(this)},e.prototype.TAG=function(){return"systemArray"},e.prototype.CHILD_TAG=function(){return"system"},e}(t.EntityDequeCollection);e.ExternalSystemArray=n}(e=t.external||(t.external={}))}(e=t.protocol||(t.protocol={}))}(samchon||(samchon={}));var samchon;!function(t){var e;!function(t){var e;!function(e){var n=function(n){function o(){n.call(this),this.history_sequence_=0}return __extends(o,n),o.prototype.at=function(t){return n.prototype.at.call(this,t)},o.prototype.sendSegmentData=function(t,e){this.sendPieceData(t,0,e)},o.prototype.sendPieceData=function(e,n,o){if(0==e.has("_History_uid"))e.push_back(new t.InvokeParameter("_History_uid",++this.history_sequence_));else{var r=e.get("_History_uid").getValue();this.history_sequence_=r}for(var i=o-n,s=0,a=0;a<this.size();a++)0==this.at(a).exclude_&&s++;for(var a=0;a<this.size();a++){var c=this.at(a);if(1!=c.exclude_){var h=a==this.size()-1?i-n:Math.floor(i/s*c.getPerformance());0!=h&&(c.send_piece_data(e,n,n+h),n+=h)}}},o.prototype._Complete_history=function(t){if(t instanceof e.PRInvokeHistory==0)return!1;for(var n=t.getUID(),o=0;o<this.size();o++)if(1==this.at(o).progress_list_.has(n))return!1;for(var r=new std.Vector,i=0,o=0;o<this.size();o++){var s=this.at(o);if(0!=s.history_list_.has(n)){var a=s.history_list_.get(n),c=a.computeSize()/a.computeElapsedTime();r.push_back(std.make_pair(s,c)),i+=c}}i/=r.size();for(var o=0;o<r.size();o++){var s=r.at(o).first,h=r.at(o).second/i,l=void 0;l=s.history_list_.size()<2?.3:Math.min(.7,1/(s.history_list_.size()-1)),s.setPerformance(s.getPerformance()*l+h*(1-l))}return this._Normalize_performance(),!0},o.prototype._Normalize_performance=function(){for(var t=0,e=0;e<this.size();e++)t+=this.at(e).getPerformance();t/=this.size();for(var e=0;e<this.size();e++){var n=this.at(e);n.setPerformance(n.getPerformance()/t)}},o}(t.external.ExternalSystemArray);e.ParallelSystemArray=n}(e=t.parallel||(t.parallel={}))}(e=t.protocol||(t.protocol={}))}(samchon||(samchon={}));var samchon;!function(t){var e;!function(e){var n;!function(n){var o=function(e){function o(){e.call(this),this.role_map_=new std.HashMap}return __extends(o,e),o.prototype.construct=function(t){if(this.role_map_.clear(),1==t.has("roles")&&1==t.get("roles").front().has("role"))for(var n=t.get("roles").front().get("role"),o=0;o<n.size();o++){var r=n.at(o),i=this.createRole(r);i.construct(r),this.role_map_.insert([i.getName(),i])}e.prototype.construct.call(this,t)},o.prototype.at=function(t){return e.prototype.at.call(this,t)},o.prototype.getRoleMap=function(){return this.role_map_},o.prototype.hasRole=function(t){return this.role_map_.has(t)},o.prototype.getRole=function(t){return this.role_map_.get(t)},o.prototype.insertRole=function(t){this.role_map_.insert([t.getName(),t])},o.prototype.eraseRole=function(t){this.role_map_.erase(t)},o.prototype._Complete_history=function(t){return t instanceof n.DSInvokeHistory?null!=t.getRole()&&(this.estimate_system_performance(t),this.estimate_system_performance(t),this._Normalize_performance(),!0):e.prototype._Complete_history.call(this,t)},o.prototype.estimate_role_performance=function(t){for(var e=t.getRole(),n=0,o=0,r=this.role_map_.begin();!r.equal_to(this.role_map_.end());r=r.next()){var i=r.second;i!=t.getRole()&&1!=i.history_list_.empty()&&(n+=i.compute_average_elapsed_time()*i.getResource(),o++)}if(0!=o){n/=o;var s=t.computeElapsedTime()/n,a=void 0;a=e.history_list_.size()<2?.15:Math.min(.85,1/(e.history_list_.size()-1)),e.setResource(e.getResource()*a+s*(1-a))}},o.prototype.estimate_system_performance=function(t){for(var e=t.getSystem(),n=0,o=0,r=0;r<this.size();r++){var i=this.at(r),s=i.compute_average_elapsed_time();s!=-1&&(n+=s,o++)}if(0!=o){n/=o;var a=n/t.computeElapsedTime(),c=void 0;c=e.history_list_.size()<2?.3:Math.min(.7,1/(e.history_list_.size()-1)),e.setPerformance(e.getPerformance()*c+a*(1-c))}},o.prototype._Normalize_performance=function(){e.prototype._Normalize_performance.call(this);for(var t=0,n=this.role_map_.begin();!n.equal_to(this.role_map_.end());n=n.next())t+=n.second.getResource();t/=this.role_map_.size();for(var n=this.role_map_.begin();!n.equal_to(this.role_map_.end());n=n.next())n.second.setResource(n.second.getResource()/t)},o.prototype.toXML=function(){var n=e.prototype.toXML.call(this);if(1==this.role_map_.empty())return n;var o=new t.library.XML;o.setTag("roles");for(var r=this.role_map_.begin();!r.equal_to(this.role_map_.end());r=r.next())o.push(r.second.toXML());return n.push(o),n},o}(e.parallel.ParallelSystemArray);n.DistributedSystemArray=o}(n=e.distributed||(e.distributed={}))}(e=t.protocol||(t.protocol={}))}(samchon||(samchon={}));var samchon;!function(t){var e;!function(t){var e;!function(t){var e=function(t){function e(){t.call(this)}return __extends(e,t),e.prototype.addClient=function(t){var e=this.createExternalClient(t);null!=e&&this.push_back(e)},e.prototype.createChild=function(t){return null},e.prototype.open=function(t){this.server_base_=this.createServerBase(),null!=this.server_base_&&this.server_base_.open(t)},e.prototype.close=function(){null!=this.server_base_&&(this.server_base_.close(),this.clear())},e}(t.DistributedSystemArray);t.DistributedClientArray=e}(e=t.distributed||(t.distributed={}))}(e=t.protocol||(t.protocol={}))}(samchon||(samchon={}));var samchon;!function(t){var e;!function(t){var e;!function(t){var e=function(t){function e(){t.call(this),this.mediator_=null}return __extends(e,t),e.prototype.startMediator=function(){null==this.mediator_&&(this.mediator_=this.createMediator(),this.mediator_.start())},e.prototype.getMediator=function(){return this.mediator_},e.prototype._Complete_history=function(e){var n=t.prototype._Complete_history.call(this,e);return 1==n&&this.mediator_.complete_history(e.getUID()),n},e}(t.DistributedSystemArray);t.DistributedSystemArrayMediator=e}(e=t.distributed||(t.distributed={}))}(e=t.protocol||(t.protocol={}))}(samchon||(samchon={}));var samchon;!function(t){var e;!function(t){var e;!function(t){var e=function(t){function e(){t.call(this)}return __extends(e,t),e.prototype.addClient=function(t){var e=this.createExternalClient(t);null!=e&&this.push_back(e)},e.prototype.createChild=function(t){return null},e.prototype.open=function(t){this.server_base_=this.createServerBase(),null!=this.server_base_&&this.server_base_.open(t)},e.prototype.close=function(){null!=this.server_base_&&(this.server_base_.close(),this.clear())},e}(t.DistributedSystemArrayMediator);t.DistributedClientArrayMediator=e}(e=t.distributed||(t.distributed={}))}(e=t.protocol||(t.protocol={}))}(samchon||(samchon={}));var samchon;!function(t){var e;!function(t){var e;!function(e){var n=function(t){function e(e,n){void 0===n&&(n=null),t.call(this),this.system_array_=e,this.communicator=n,null!=n&&n.listen(this),this.name=""}return __extends(e,t),e.prototype.destructor=function(){null!=this.communicator&&1==this.communicator.isConnected()&&(this.communicator.onClose=null,this.communicator.close())},e.prototype.handle_close=function(){null!=this.system_array_&&std.remove(this.system_array_.begin(),this.system_array_.end(),this)},e.prototype.getSystemArray=function(){return this.system_array_},e.prototype.key=function(){return this.name},e.prototype.getName=function(){return this.name},Object.defineProperty(e.prototype,"communicator",{get:function(){return this.communicator_},set:function(t){this.communicator_=t,null!=this.communicator_&&(this.communicator.onClose=this.handle_close.bind(this))},enumerable:!0,configurable:!0}),e.prototype.close=function(){this.communicator.close()},e.prototype.sendData=function(t){this.communicator.sendData(t)},e.prototype.replyData=function(t){if(1!=t.apply(this)){this.system_array_.replyData(t);for(var e=0;e<this.size();e++)this.at(e).replyData(t)}},e.prototype.TAG=function(){return"system"},e.prototype.CHILD_TAG=function(){return"role"},e}(t.EntityDequeCollection);e.ExternalSystem=n}(e=t.external||(t.external={}))}(e=t.protocol||(t.protocol={}))}(samchon||(samchon={}));var samchon;!function(t){var e;!function(t){var e;!function(e){var n=function(n){function o(t,e){void 0===e&&(e=null),n.call(this,t,e),this.progress_list_=new std.HashMap,this.history_list_=new std.HashMap,this.enforced_=!1,this.exclude_=!1,this.performance=1}return __extends(o,n),o.prototype.destructor=function(){n.prototype.destructor.call(this);for(var t=this.progress_list_.begin();!t.equal_to(this.progress_list_.end());t=t.next()){var e=t.second.first,o=t.second.second;this._Send_back_history(e,o)}},o.prototype.getSystemArray=function(){return n.prototype.getSystemArray.call(this)},o.prototype.getPerformance=function(){return this.performance},o.prototype.setPerformance=function(t){this.performance=t,this.enforced_=!1},o.prototype.enforcePerformance=function(t){this.performance=t,this.enforced_=!0},o.prototype.send_piece_data=function(n,o,r){var i=new t.Invoke(n.getListener());i.assign(n.begin(),n.end()),i.push_back(new t.InvokeParameter("_Piece_first",o)),i.push_back(new t.InvokeParameter("_Piece_last",r));var s=new e.PRInvokeHistory(i);this.progress_list_.insert([s.getUID(),std.make_pair(i,s)]),this.sendData(i)},o.prototype._replyData=function(t){if("_Report_history"==t.getListener())this._Report_history(t.front().getValue());else if("_Send_back_history"==t.getListener()){var e=t.front().getValue(),n=this.progress_list_.find(e);if(1==n.equal_to(this.progress_list_.end()))return;this._Send_back_history(n.second.first,n.second.second),this.progress_list_.erase(e)}else this.replyData(t)},o.prototype._Report_history=function(t){var n=new e.PRInvokeHistory;n.construct(t);var o=this.progress_list_.find(n.getUID());1!=o.equal_to(this.progress_list_.end())&&(n.first=o.second.second.getFirst(),n.last=o.second.second.computeSize(),this.progress_list_.erase(o),this.history_list_.insert([n.getUID(),n]),this.getSystemArray()._Complete_history(n))},o.prototype._Send_back_history=function(t,n){n instanceof e.PRInvokeHistory&&(std.remove_if(t.begin(),t.end(),function(t){return"_History_uid"==t.getName()||"_Piece_first"==t.getName()||"_Piece_last"==t.getName()}),this.getSystemArray().sendPieceData(t,n.getFirst(),n.getLast()))},o}(t.external.ExternalSystem);e.ParallelSystem=n}(e=t.parallel||(t.parallel={}))}(e=t.protocol||(t.protocol={}))}(samchon||(samchon={}));var samchon;!function(t){var e;!function(t){var e;!function(e){var n=function(n){function o(){n.apply(this,arguments)}return __extends(o,n),o.prototype.createChild=function(t){return null},o.prototype.getSystemArray=function(){return n.prototype.getSystemArray.call(this)},o.prototype.has=function(t){return this.getSystemArray().hasRole(t)},o.prototype.get=function(t){return this.getSystemArray().getRole(t)},o.prototype.compute_average_elapsed_time=function(){for(var e=0,n=0,o=this.history_list_.begin();!o.equal_to(this.history_list_.end());o=o.next()){var r=o.second;r instanceof t.parallel.PRInvokeHistory||(e+=r.computeElapsedTime()/r.getRole().getResource(),n++)}return 0==n?-1:e/n},o.prototype.replyData=function(t){if(1!=t.apply(this)){this.getSystemArray().replyData(t);for(var e=this.getSystemArray().getRoleMap(),n=e.begin();!n.equal_to(e.end());n=n.next())n.second.replyData(t)}},o.prototype._Report_history=function(t){
if(1==t.hasProperty("_Piece_first"))return n.prototype._Report_history.call(this,t);var o=new e.DSInvokeHistory(this);o.construct(t);var r=this.progress_list_.find(o.getUID());1!=r.equal_to(this.progress_list_.end())&&(this.progress_list_.erase(r),this.history_list_.insert([o.getUID(),o]),null!=o.getRole()&&o.getRole().complete_history(o),this.getSystemArray()._Complete_history(o))},o.prototype._Send_back_history=function(t,o){o instanceof e.DSInvokeHistory?o.getRole().sendData(t):n.prototype._Send_back_history.call(this,t,o)},o}(t.parallel.ParallelSystem);e.DistributedSystem=n}(e=t.distributed||(t.distributed={}))}(e=t.protocol||(t.protocol={}))}(samchon||(samchon={}));var samchon;!function(t){var e;!function(t){var e;!function(t){var e=function(t){function e(e){t.call(this,e),this.ip="",this.port=0}return __extends(e,t),e.prototype.connect=function(){null==this.communicator&&(this.communicator=this.createServerConnector(),this.communicator.connect(this.ip,this.port))},e.prototype.getIP=function(){return this.ip},e.prototype.getPort=function(){return this.port},e}(t.DistributedSystem);t.DistributedServer=e}(e=t.distributed||(t.distributed={}))}(e=t.protocol||(t.protocol={}))}(samchon||(samchon={}));var samchon;!function(t){var e;!function(t){var e;!function(t){var e=function(t){function e(){t.call(this)}return __extends(e,t),e.prototype.connect=function(){for(var t=0;t<this.size();t++){var e=this.at(t);void 0!=e.connect&&e.connect()}},e}(t.DistributedSystemArray);t.DistributedServerArray=e}(e=t.distributed||(t.distributed={}))}(e=t.protocol||(t.protocol={}))}(samchon||(samchon={}));var samchon;!function(t){var e;!function(t){var e;!function(t){var e=function(t){function e(){t.call(this)}return __extends(e,t),e.prototype.connect=function(){for(var t=0;t<this.size();t++){var e=this.at(t);void 0!=e.connect&&e.connect()}},e}(t.DistributedSystemArrayMediator);t.DistributedServerArrayMediator=e}(e=t.distributed||(t.distributed={}))}(e=t.protocol||(t.protocol={}))}(samchon||(samchon={}));var samchon;!function(t){var e;!function(t){var e;!function(t){var e=function(t){function e(){t.call(this)}return __extends(e,t),e.prototype.createChild=function(t){return this.createExternalServer(t)},e.prototype.connect=function(){for(var t=0;t<this.size();t++){var e=this.at(t);void 0!=e.connect&&e.connect()}},e}(t.DistributedClientArray);t.DistributedServerClientArray=e}(e=t.distributed||(t.distributed={}))}(e=t.protocol||(t.protocol={}))}(samchon||(samchon={}));var samchon;!function(t){var e;!function(t){var e;!function(t){var e=function(t){function e(){t.call(this)}return __extends(e,t),e.prototype.createChild=function(t){return this.createExternalServer(t)},e.prototype.connect=function(){for(var t=0;t<this.size();t++){var e=this.at(t);void 0!=e.connect&&e.connect()}},e}(t.DistributedClientArrayMediator);t.DistributedServerClientArrayMediator=e}(e=t.distributed||(t.distributed={}))}(e=t.protocol||(t.protocol={}))}(samchon||(samchon={}));var samchon;!function(t){var e;!function(t){var e;!function(e){function n(e,n){for(var o=[],r=2;r<arguments.length;r++)o[r-2]=arguments[r];if(e.clear(),t.IEntity.construct.apply(t.IEntity,[e,n].concat(o)),0!=n.has(e.CHILD_TAG())){for(var i=new std.Vector,s=n.get(e.CHILD_TAG()),a=0;a<s.size();a++){var c=e.createChild(s.at(a));null!=c&&(c.construct(s.at(a)),i.push(c))}e.assign(i.begin(),i.end())}}function o(e){for(var n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];for(var r=t.IEntity.toXML.apply(t.IEntity,[e].concat(n)),i=e.begin();!i.equal_to(e.end());i=i.next())r.push(i.value.toXML());return r}function r(t,e){return std.any_of(t.begin(),t.end(),function(t){return std.equal_to(t.key(),e)})}function i(t,e){return std.count_if(t.begin(),t.end(),function(t){return std.equal_to(t.key(),e)})}function s(t,e){for(var n=t.begin();!n.equal_to(t.end());n=n.next())if(1==std.equal_to(n.value.key(),e))return n.value;throw new std.OutOfRange("out of range")}e.construct=n,e.toXML=o,e.has=r,e.count=i,e.get=s}(e=t.IEntityGroup||(t.IEntityGroup={}))}(e=t.protocol||(t.protocol={}))}(samchon||(samchon={}));var samchon;!function(t){var e;!function(t){var e=function(e){function n(){e.apply(this,arguments)}return __extends(n,e),n.prototype.construct=function(e){t.IEntityGroup.construct(this,e,"length")},n.prototype.key=function(){return""},n.prototype.has=function(e){return t.IEntityGroup.has(this,e)},n.prototype.count=function(e){return t.IEntityGroup.count(this,e)},n.prototype.get=function(e){return t.IEntityGroup.get(this,e)},n.prototype.toXML=function(){return t.IEntityGroup.toXML(this,"length")},n}(std.Vector);t.EntityArray=e}(e=t.protocol||(t.protocol={}))}(samchon||(samchon={}));var samchon;!function(t){var e;!function(t){var e=function(e){function n(){e.apply(this,arguments)}return __extends(n,e),n.prototype.construct=function(e){t.IEntityGroup.construct(this,e)},n.prototype.key=function(){return""},n.prototype.has=function(e){return t.IEntityGroup.has(this,e)},n.prototype.count=function(e){return t.IEntityGroup.count(this,e)},n.prototype.get=function(e){return t.IEntityGroup.get(this,e)},n.prototype.toXML=function(){return t.IEntityGroup.toXML(this)},n}(std.List);t.EntityList=e}(e=t.protocol||(t.protocol={}))}(samchon||(samchon={}));var samchon;!function(t){var e;!function(t){var e=function(e){function n(){e.apply(this,arguments)}return __extends(n,e),n.prototype.construct=function(e){t.IEntityGroup.construct(this,e)},n.prototype.key=function(){return""},n.prototype.has=function(e){return t.IEntityGroup.has(this,e)},n.prototype.count=function(e){return t.IEntityGroup.count(this,e)},n.prototype.get=function(e){return t.IEntityGroup.get(this,e)},n.prototype.toXML=function(){return t.IEntityGroup.toXML(this)},n}(std.Deque);t.EntityDeque=e}(e=t.protocol||(t.protocol={}))}(samchon||(samchon={}));var samchon;!function(t){var e;!function(t){var e=function(e){function n(t){void 0===t&&(t=null),e.call(this),null==t?(this.uid=0,this.listener=""):(this.uid=t.get("_History_uid").getValue(),this.listener=t.getListener(),this.start_time_=new Date)}return __extends(n,e),n.prototype.construct=function(t){e.prototype.construct.call(this,t),this.start_time_=new Date(parseInt(t.getProperty("startTime"))),this.end_time_=new Date(parseInt(t.getProperty("endTime")))},n.prototype.complete=function(){this.end_time_=new Date},n.prototype.key=function(){return this.uid},n.prototype.getUID=function(){return this.uid},n.prototype.getListener=function(){return this.listener},n.prototype.getStartTime=function(){return this.start_time_},n.prototype.getEndTime=function(){return this.end_time_},n.prototype.computeElapsedTime=function(){return Math.max(this.end_time_.getTime()-this.start_time_.getTime(),1)},n.prototype.TAG=function(){return"history"},n.prototype.toXML=function(){var t=e.prototype.toXML.call(this);return t.setProperty("startTime",this.start_time_.getTime()+""),t.setProperty("endTime",this.end_time_.getTime()+""),t},n.prototype.toInvoke=function(){return new t.Invoke("_Report_history",this.toXML())},n}(t.Entity);t.InvokeHistory=e}(e=t.protocol||(t.protocol={}))}(samchon||(samchon={}));var samchon;!function(t){var e;!function(t){var e;!function(e){var n=function(t){function e(e,n,o){void 0===n&&(n=null),void 0===o&&(o=null),t.call(this,o),this.system_=e,this.role_=n}return __extends(e,t),e.prototype.construct=function(e){if(t.prototype.construct.call(this,e),0==e.hasProperty("role"))return void(this.role_=null);var n=e.getProperty("role");1==this.system_.has(n)?this.role_=this.system_.get(n):this.role_=null},e.prototype.getSystem=function(){return this.system_},e.prototype.getRole=function(){return this.role_},e.prototype.toXML=function(){var e=t.prototype.toXML.call(this);return null!=this.role_&&e.setProperty("role",this.role_.getName()),e},e}(t.InvokeHistory);e.DSInvokeHistory=n}(e=t.distributed||(t.distributed={}))}(e=t.protocol||(t.protocol={}))}(samchon||(samchon={}));var samchon;!function(t){var e;!function(t){var e;!function(t){var e=function(t){function e(){t.call(this),this.server_base_=null}return __extends(e,t),e.prototype.addClient=function(t){var e=this.createExternalClient(t);null!=e&&this.push_back(e)},e.prototype.createChild=function(t){return null},e.prototype.open=function(t){this.server_base_=this.createServerBase(),null!=this.server_base_&&this.server_base_.open(t)},e.prototype.close=function(){null!=this.server_base_&&(this.server_base_.close(),this.clear())},e}(t.ExternalSystemArray);t.ExternalClientArray=e}(e=t.external||(t.external={}))}(e=t.protocol||(t.protocol={}))}(samchon||(samchon={}));var samchon;!function(t){var e;!function(t){var e;!function(t){var e=function(t){function e(e){t.call(this,e),this.ip="",this.port=0}return __extends(e,t),e.prototype.connect=function(){this.communicator=this.createServerConnector(),this.communicator.connect(this.ip,this.port)},e.prototype.getIP=function(){return this.ip},e.prototype.getPort=function(){return this.port},e}(t.ExternalSystem);t.ExternalServer=e}(e=t.external||(t.external={}))}(e=t.protocol||(t.protocol={}))}(samchon||(samchon={}));var samchon;!function(t){var e;!function(t){var e;!function(t){var e=function(t){function e(){t.call(this)}return __extends(e,t),e.prototype.connect=function(){for(var t=0;t<this.size();t++){var e=this.at(t);void 0!=e.connect&&e.connect()}},e}(t.ExternalSystemArray);t.ExternalServerArray=e}(e=t.external||(t.external={}))}(e=t.protocol||(t.protocol={}))}(samchon||(samchon={}));var samchon;!function(t){var e;!function(t){var e;!function(t){var e=function(t){function e(){t.call(this)}return __extends(e,t),e.prototype.createChild=function(t){return this.createExternalServer(t)},e.prototype.connect=function(){for(var t=0;t<this.size();t++){var e=this.at(t);void 0!=e.connect&&e.connect()}},e}(t.ExternalClientArray);t.ExternalServerClientArray=e}(e=t.external||(t.external={}))}(e=t.protocol||(t.protocol={}))}(samchon||(samchon={}));var samchon;!function(t){var e;!function(t){var e=function(e){function n(){for(var n=[],o=0;o<arguments.length;o++)n[o-0]=arguments[o];if(e.call(this),this.listener="",0==n.length)this.listener="";else{this.listener=n[0];for(var r=1;r<n.length;r++)this.push_back(new t.InvokeParameter(n[r]))}}return __extends(n,e),n.prototype.createChild=function(e){return new t.InvokeParameter},n.prototype.getListener=function(){return this.listener},n.prototype.getArguments=function(){for(var t=[],e=0;e<this.size();e++){if("_History_uid"==this[e].getName())continue;t.push(this[e].getValue())}return t},n.prototype.apply=function(t){if(!(this.listener in t&&t[this.listener]instanceof Function))return!1;var e=t[this.listener],n=this.getArguments();return e.apply(t,n),!0},n.prototype.TAG=function(){return"invoke"},n.prototype.CHILD_TAG=function(){return"parameter"},n}(t.EntityArray);t.Invoke=e}(e=t.protocol||(t.protocol={}))}(samchon||(samchon={}));var samchon;!function(t){var e;!function(e){var n=function(e){function n(){for(var t=[],n=0;n<arguments.length;n++)t[n-0]=arguments[n];e.call(this),this.name="",this.type="",this.value=null,0!=t.length&&(1==t.length?(this.name="",this.setValue(t[0])):(this.name=t[0],this.setValue(t[1])))}return __extends(n,e),n.prototype.construct=function(t){this.name=t.hasProperty("name")?t.getProperty("name"):"",this.type=t.getProperty("type"),"XML"==this.type?this.value=t.begin().second.front():"number"==this.type?this.value=Number(t.getValue()):"string"==this.type&&(this.value=t.getValue())},n.prototype.setValue=function(e){this.value=e,e instanceof t.library.XML?this.type="XML":e instanceof Uint8Array?this.type="ByteArray":this.type=typeof e},n.prototype.key=function(){return this.name},n.prototype.getName=function(){return this.name},n.prototype.getType=function(){return this.type},n.prototype.getValue=function(){return this.value},n.prototype.TAG=function(){return"parameter"},n.prototype.toXML=function(){var e=new t.library.XML;return e.setTag(this.TAG()),""!=this.name&&e.setProperty("name",this.name),e.setProperty("type",this.type),"XML"==this.type?e.push(this.value):"ByteArray"!=this.type&&e.setValue(this.value+""),e},n}(e.Entity);e.InvokeParameter=n}(e=t.protocol||(t.protocol={}))}(samchon||(samchon={}));var samchon;!function(t){var e;!function(t){var e;!function(e){var n=function(){function e(){this.communicator_=null}return e.prototype.sendData=function(t){this.communicator_.sendData(t)},e.prototype._replyData=function(e){if(e.has("_History_uid")){var n=new t.InvokeHistory(e);std.remove_if(e.begin(),e.end(),function(t){return"_History_uid"==t.getName()||"_Role_name"==t.getName()}),this.replyData(e),n.complete(),this.sendData(n.toInvoke())}else this.replyData(e)},e.prototype.replyData=function(t){t.apply(this)},e}();e.SlaveSystem=n}(e=t.slave||(t.slave={}))}(e=t.protocol||(t.protocol={}))}(samchon||(samchon={}));var samchon;!function(t){var e;!function(t){var e;!function(e){var n=function(e){function n(t){e.call(this),this.system_array_=t,this.progress_list_=new std.HashMap}return __extends(n,e),n.prototype.getSystemArray=function(){return this.system_array_},n.prototype.complete_history=function(t){if(0!=this.progress_list_.has(t)){for(var e=this.progress_list_.get(t),n=null,o=null,r=0;r<this.system_array_.size();r++){var i=this.system_array_.at(r),s=i.history_list_.find(t);if(1!=s.equal_to(i.history_list_.end())){var a=s.second;(null==n||a.getStartTime()<n)&&(n=a.getStartTime()),(null==o||a.getEndTime()>o)&&(o=a.getEndTime())}}e.start_time_=n,e.end_time_=o,this.progress_list_.erase(t),this.sendData(e.toInvoke())}},n.prototype._replyData=function(e){if(1==e.has("_History_uid")){var n=new t.InvokeHistory(e);if(1==this.system_array_.empty())return void this.sendData(new t.Invoke("_Send_back_history",n.getUID()));if(this.progress_list_.insert([n.getUID(),n]),1==e.has("_Piece_first")){var o=e.get("_Piece_first").getValue(),r=e.get("_Piece_last").getValue();e.erase(e.end().advance(-2),e.end()),this.system_array_.sendPieceData(e,o,r)}else if(this.system_array_ instanceof t.distributed.DistributedSystemArrayMediator&&1==e.has("_Role_name")){var i=this.system_array_,s=e.get("_Role_name").getValue();if(0==i.hasRole(s))return;var a=i.getRole(s);a.sendData(e)}}else this.replyData(e)},n.prototype.replyData=function(t){1!=t.apply(this)&&this.system_array_.sendData(t)},n}(t.slave.SlaveSystem);e.MediatorSystem=n}(e=t.parallel||(t.parallel={}))}(e=t.protocol||(t.protocol={}))}(samchon||(samchon={}));var samchon;!function(t){var e;!function(t){var e;!function(e){var n=function(e){function n(t,n){e.call(this,t),this.port=n}return __extends(n,e),n.prototype.createServerBase=function(){return new t.ServerBase(this)},n.prototype.addClient=function(t){this.communicator_=t,t.listen(this)},n.prototype.start=function(){this.open(this.port)},n.prototype.open=function(t){this.server_base_=this.createServerBase(),null!=this.server_base_&&this.server_base_.open(t)},n.prototype.close=function(){null!=this.server_base_&&this.server_base_.close()},n}(e.MediatorSystem);e.MediatorServer=n;var o=function(e){function n(){e.apply(this,arguments)}return __extends(n,e),n.prototype.createServerBase=function(){return new t.WebServerBase(this)},n}(n);e.MediatorWebServer=o;var r=function(e){function n(){e.apply(this,arguments)}return __extends(n,e),n.prototype.createServerBase=function(){return new t.SharedWorkerServerBase(this)},n}(n);e.MediatorSharedWorkerServer=r}(e=t.parallel||(t.parallel={}))}(e=t.protocol||(t.protocol={}))}(samchon||(samchon={}));var samchon;!function(t){var e;!function(t){var e;!function(e){var n=function(e){function n(t,n,o){e.call(this,t),this.ip=n,this.port=o}return __extends(n,e),n.prototype.createServerConnector=function(){return new t.ServerConnector(this)},n.prototype.getIP=function(){return this.ip},n.prototype.getPort=function(){return this.port},n.prototype.start=function(){this.connect()},n.prototype.connect=function(){null==this.communicator_&&(this.communicator_=this.createServerConnector(),this.communicator_.connect(this.ip,this.port))},n}(e.MediatorSystem);e.MediatorClient=n;var o=function(e){function n(){e.apply(this,arguments)}return __extends(n,e),n.prototype.createServerConnector=function(){return new t.WebServerConnector(this)},n}(n);e.MediatorWebClient=o;var r=function(e){function n(){e.apply(this,arguments)}return __extends(n,e),n.prototype.createServerConnector=function(){return new t.SharedWorkerServerConnector(this)},n}(n);e.MediatorSharedWorkerClient=r}(e=t.parallel||(t.parallel={}))}(e=t.protocol||(t.protocol={}))}(samchon||(samchon={}));var samchon;!function(t){var e;!function(t){var e;!function(t){var e=function(t){function e(){t.call(this)}return __extends(e,t),e.prototype.addClient=function(t){var e=this.createExternalClient(t);null!=e&&this.push_back(e)},e.prototype.createChild=function(t){return null},e.prototype.open=function(t){this.server_base_=this.createServerBase(),null!=this.server_base_&&this.server_base_.open(t)},e.prototype.close=function(){null!=this.server_base_&&(this.server_base_.close(),this.clear())},e}(t.ParallelSystemArray);t.ParallelClientArray=e}(e=t.parallel||(t.parallel={}))}(e=t.protocol||(t.protocol={}))}(samchon||(samchon={}));var samchon;!function(t){var e;!function(t){var e;!function(t){var e=function(t){function e(){t.call(this),this.mediator_=null}return __extends(e,t),e.prototype.start_mediator=function(){null==this.mediator_&&(this.mediator_=this.createMediator(),this.mediator_.start())},e.prototype.getMediator=function(){return this.mediator_},e.prototype._Complete_history=function(e){var n=t.prototype._Complete_history.call(this,e);return 1==n&&this.mediator_.complete_history(e.getUID()),n},e}(t.ParallelSystemArray);t.ParallelSystemArrayMediator=e}(e=t.parallel||(t.parallel={}))}(e=t.protocol||(t.protocol={}))}(samchon||(samchon={}));var samchon;!function(t){var e;!function(t){var e;!function(t){var e=function(t){function e(){t.call(this)}return __extends(e,t),e.prototype.addClient=function(t){var e=this.createExternalClient(t);null!=e&&this.push_back(e)},e.prototype.createChild=function(t){return null},e.prototype.open=function(t){this.server_base_=this.createServerBase(),null!=this.server_base_&&(this.server_base_.open(t),this.start_mediator())},e.prototype.close=function(){null!=this.server_base_&&(this.server_base_.close(),this.clear())},e}(t.ParallelSystemArrayMediator);t.ParallelClientArrayMediator=e}(e=t.parallel||(t.parallel={}))}(e=t.protocol||(t.protocol={}))}(samchon||(samchon={}));var samchon;!function(t){var e;!function(t){var e;!function(t){var e=function(t){function e(e){t.call(this,e),this.ip="",this.port=0}return __extends(e,t),e.prototype.connect=function(){null==this.communicator&&(this.communicator=this.createServerConnector(),this.communicator.connect(this.ip,this.port))},e.prototype.getIP=function(){return this.ip},e.prototype.getPort=function(){return this.port},e}(t.ParallelSystem);t.ParallelServer=e}(e=t.parallel||(t.parallel={}))}(e=t.protocol||(t.protocol={}))}(samchon||(samchon={}));var samchon;!function(t){var e;!function(t){var e;!function(t){var e=function(t){function e(){t.call(this)}return __extends(e,t),e.prototype.connect=function(){for(var t=0;t<this.size();t++){var e=this.at(t);void 0!=e.connect&&e.connect()}},e}(t.ParallelSystemArray);t.ParallelServerArray=e}(e=t.parallel||(t.parallel={}))}(e=t.protocol||(t.protocol={}))}(samchon||(samchon={}));var samchon;!function(t){var e;!function(t){var e;!function(t){var e=function(t){function e(){t.call(this)}return __extends(e,t),e.prototype.connect=function(){for(var t=0;t<this.size();t++){var e=this.at(t);void 0!=e.connect&&e.connect()}},e}(t.ParallelSystemArrayMediator);t.ParallelServerArrayMediator=e}(e=t.parallel||(t.parallel={}))}(e=t.protocol||(t.protocol={}))}(samchon||(samchon={}));var samchon;!function(t){var e;!function(t){var e;!function(t){var e=function(t){function e(){t.call(this)}return __extends(e,t),e.prototype.createChild=function(t){return this.createExternalServer(t)},e.prototype.connect=function(){for(var t=0;t<this.size();t++){var e=this.at(t);void 0!=e.connect&&e.connect()}},e}(t.ParallelClientArray);t.ParallelServerClientArray=e}(e=t.parallel||(t.parallel={}))}(e=t.protocol||(t.protocol={}))}(samchon||(samchon={}));var samchon;!function(t){var e;!function(t){var e;!function(t){var e=function(t){function e(){t.call(this)}return __extends(e,t),e.prototype.createChild=function(t){return this.createExternalServer(t)},e.prototype.connect=function(){for(var t=0;t<this.size();t++){var e=this.at(t);void 0!=e.connect&&e.connect()}},e}(t.ParallelClientArrayMediator);t.ParallelServerClientArrayMediator=e}(e=t.parallel||(t.parallel={}))}(e=t.protocol||(t.protocol={}))}(samchon||(samchon={}));var samchon;!function(t){var e;!function(t){var e;!function(e){var n=function(t){function e(e){void 0===e&&(e=null),t.call(this,e),null==e?(this.first=0,this.last=0):(this.first=e.get("_Piece_first").getValue(),this.last=e.get("_Piece_last").getValue())}return __extends(e,t),e.prototype.getFirst=function(){return this.first},e.prototype.getLast=function(){return this.last},e.prototype.computeSize=function(){return this.last},e}(t.InvokeHistory);e.PRInvokeHistory=n}(e=t.parallel||(t.parallel={}))}(e=t.protocol||(t.protocol={}))}(samchon||(samchon={}));var samchon;!function(t){var e;!function(t){var e=function(){function e(){}return e.prototype.open=function(t){this.server=net.createServer(this.handle_connect.bind(this)),this.server.listen(t)},e.prototype.close=function(){this.server.close()},e.prototype.handle_connect=function(e){var n=new t.ClientDriver(e);this.addClient(n)},e}();t.Server=e}(e=t.protocol||(t.protocol={}))}(samchon||(samchon={}));var samchon;!function(t){var e;!function(t){var e=function(){function e(){this.sequence_=0}return e.prototype.open=function(t){this.my_port_=t,this.http_server_=http.createServer(),this.http_server_.listen(t);var e=new websocket.server({httpServer:this.http_server_});e.on("request",this.handle_request.bind(this))},e.prototype.close=function(){this.http_server_.close()},e.prototype.handle_request=function(e){var n=e.resource.substr(1),o=this.get_session_id(e.cookies),r=e.accept("",e.origin,[{name:"SESSION_ID",value:o}]),i=new t.WebClientDriver(r,n,o);this.addClient(i)},e.prototype.get_session_id=function(t){for(var e=0;e<t.length;e++)if("SESSION_ID"==t[e].name)return t[e].value;return this.issue_session_id()},e.prototype.issue_session_id=function(){var t=this.my_port_,e=++this.sequence_,n=(new Date).getTime(),o=Math.floor(4294967295*Math.random());return t.toString(16)+e.toString(16)+n.toString(16)+o.toString(16)},e}();t.WebServer=e}(e=t.protocol||(t.protocol={}))}(samchon||(samchon={}));var samchon;!function(t){var e;!function(t){var e=function(){function e(){}return e.prototype.open=function(){self.addEventListener("connect",this.handle_connect.bind(this))},e.prototype.close=function(){},e.prototype.handle_connect=function(e){var n=e.ports[e.ports.length-1],o=new t.SharedWorkerClientDriver(n);this.addClient(o)},e}();t.SharedWorkerServer=e}(e=t.protocol||(t.protocol={}))}(samchon||(samchon={}));var samchon;!function(t){var e;!function(t){var e=function(t){function e(e){t.call(this),this.target_=e}return __extends(e,t),e.prototype.addClient=function(t){this.target_.addClient(t)},e}(t.Server);t.ServerBase=e}(e=t.protocol||(t.protocol={}))}(samchon||(samchon={}));var samchon;!function(t){var e;!function(t){var e=function(t){function e(e){t.call(this),this.target_=e}return __extends(e,t),e.prototype.addClient=function(t){this.target_.addClient(t)},e}(t.WebServer);t.WebServerBase=e}(e=t.protocol||(t.protocol={}))}(samchon||(samchon={}));var samchon;!function(t){var e;!function(t){var e=function(t){function e(e){t.call(this),this.target_=e}return __extends(e,t),e.prototype.addClient=function(t){this.target_.addClient(t)},e}(t.SharedWorkerServer);t.SharedWorkerServerBase=e}(e=t.protocol||(t.protocol={}))}(samchon||(samchon={}));var samchon;!function(t){var e;!function(t){var e=function(t){function e(e){t.call(this,e),this.connected_=!1}return __extends(e,t),e.prototype.connect=function(t,e){this.socket_=net.connect({host:t,port:e},this.handle_connect.bind(this))},e.prototype.handle_connect=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];this.connected_=!0,this.start_listen(),null!=this.onConnect&&this.onConnect()},e}(t.Communicator);t.ServerConnector=e}(e=t.protocol||(t.protocol={}))}(samchon||(samchon={}));var samchon;!function(t){var e;!function(e){var n=function(e){function n(t){e.call(this,t),this.browser_socket_=null,this.node_client_=null,this.connected_=!1,this.onConnect=null}return __extends(n,e),n.prototype.connect=function(e,n,o){void 0===o&&(o="");var r;if(e.indexOf("ws://")==-1){if(e.indexOf("://")!=-1)throw"only websocket is possible";e="ws://"+e}r=e+":"+n+"/"+o,1==t.is_node()?(this.node_client_=new websocket.client,this.node_client_.on("connect",this.handle_node_connect.bind(this)),this.node_client_.connect(r)):(this.browser_socket_=new WebSocket(r),this.browser_socket_.onopen=this.handle_browser_connect.bind(this),this.browser_socket_.onerror=this.handle_close.bind(this),this.browser_socket_.onclose=this.handle_close.bind(this),this.browser_socket_.onmessage=this.handle_browser_message.bind(this))},n.prototype.close=function(){this.close()},n.prototype.sendData=function(t){if(null!=this.browser_socket_){this.browser_socket_.send(t.toXML().toString());for(var n=0;n<t.size();n++)"ByteArray"==t.at(n).getType()&&this.browser_socket_.send(t.at(n).getValue())}else e.prototype.sendData.call(this,t)},n.prototype.handle_browser_connect=function(t){this.connected_=!0,null!=this.onConnect&&this.onConnect()},n.prototype.handle_browser_message=function(t){0==this.is_binary_invoke()?this.handle_string(t.data):this.handle_binary(t.data)},n.prototype.handle_node_connect=function(t){this.connected_=!0,this.connection_=t,this.connection_.on("message",this.handle_message.bind(this)),this.connection_.on("close",this.handle_close.bind(this)),this.connection_.on("error",this.handle_close.bind(this)),null!=this.onConnect&&this.onConnect()},n}(e.WebCommunicator);e.WebServerConnector=n}(e=t.protocol||(t.protocol={}))}(samchon||(samchon={}));var samchon;!function(t){var e;!function(t){var e=function(t){function e(e){t.call(this,e),this.connected_=!1,this.onConnect=null}return __extends(e,t),e.prototype.connect=function(t){var e=new SharedWorker(t);this.port_=e.port,this.port_.onmessage=this.handle_message.bind(this),this.connected_=!0,null!=this.onConnect&&this.onConnect()},e}(t.SharedWorkerCommunicator);t.SharedWorkerServerConnector=e}(e=t.protocol||(t.protocol={}))}(samchon||(samchon={}));var samchon;!function(t){var e;!function(t){var e;!function(t){var e=function(){function t(t,e){this.user_=t,this.no_=++t.sequence_,this.communicator_=e,this.communicator_.listen(this),this.service_=this.createService(e.getPath())}return t.prototype.destructor=function(){},t.prototype.close=function(){this.user_.erase(this.no_)},t.prototype.getUser=function(){return this.user_},t.prototype.getService=function(){return this.service_},t.prototype.getNo=function(){return this.no_},t.prototype.sendData=function(t){this.communicator_.sendData(t)},t.prototype.replyData=function(t){1!=t.apply(this)&&(this.user_.replyData(t),null!=this.service_&&this.service_.replyData(t))},t.prototype.changeService=function(t){null!=this.service_&&this.service_.destructor(),this.service_=this.createService(t)},t}();t.Client=e}(e=t.service||(t.service={}))}(e=t.protocol||(t.protocol={}))}(samchon||(samchon={}));var samchon;!function(t){var e;!function(t){var e;!function(e){var n=function(t){function e(){t.call(this),this.session_map_=new std.HashMap,this.account_map_=new std.HashMap}return __extends(e,t),e.prototype.has=function(t){return this.account_map_.has(t)},e.prototype.get=function(t){return this.account_map_.get(t)},e.prototype.sendData=function(t){for(var e=this.session_map_.begin();!e.equal_to(this.session_map_.end());e=e.next())e.second.sendData(t)},e.prototype.replyData=function(t){t.apply(this)},e.prototype.addClient=function(t){var e;1==this.session_map_.has(t.getSessionID())?e=this.session_map_.get(t.getSessionID()):(e=this.createUser(),e.session_id_=t.getSessionID(),this.session_map_.insert(std.make_pair(t.getSessionID(),e)));var n=e.createClient(t);e.insert(std.make_pair(n.getNo(),n)),t.onClose=function(){e.erase(n.getNo()),null!=n.getService()&&n.getService().destructor(),n.destructor()}},e.prototype.erase_user=function(t){setTimeout(function(){var e=this;0!=t.empty()&&(e.session_map_.erase(t.session_id_),""!=t.getAccountID()&&e.account_map_.erase(t.getAccountID()),t.destructor())}.bind(this),3e4)},e}(t.WebServer);e.Server=n}(e=t.service||(t.service={}))}(e=t.protocol||(t.protocol={}))}(samchon||(samchon={}));var samchon;!function(t){var e;!function(t){var e;!function(t){var e=function(){function t(t,e){this.client_=t,this.path_=e}return t.prototype.destructor=function(){},t.prototype.getClient=function(){return this.client_},t.prototype.getPath=function(){return this.path_},t.prototype.sendData=function(t){return this.client_.sendData(t)},t.prototype.replyData=function(t){t.apply(this)},t}();t.Service=e}(e=t.service||(t.service={}))}(e=t.protocol||(t.protocol={}))}(samchon||(samchon={}));var samchon;!function(t){var e;!function(e){var n;!function(e){var n=function(t){function e(e){t.call(this),this.server_=e,this.account_id_="guest",this.authority_=0,this.session_id_="",this.sequence_=0,this.addEventListener("erase",this.handle_erase_client,this)}return __extends(e,t),e.prototype.destructor=function(){},e.prototype.handle_erase_client=function(t){for(var e=t.first;!e.equal_to(t.last);e=e.next())e.second.close();1==this.empty()&&this.server_.erase_user(this)},e.prototype.getServer=function(){return this.server_},e.prototype.getAccountID=function(){return this.account_id_},e.prototype.getAuthority=function(){return this.authority_},e.prototype.setAccount=function(t,e){this.account_id_!=t&&(""!=this.account_id_&&this.server_.account_map_.erase(this.account_id_),this.account_id_=t,this.authority_=e,this.server_.account_map_.set(t,this))},e.prototype.sendData=function(t){for(var e=this.begin();!e.equal_to(this.end());e=e.next())e.second.sendData(t)},e.prototype.replyData=function(t){t.apply(this),this.server_.replyData(t)},e}(t.collection.HashMapCollection);e.User=n}(n=e.service||(e.service={}))}(e=t.protocol||(t.protocol={}))}(samchon||(samchon={}));var samchon;!function(t){var e;!function(t){var e;!function(t){var e=function(t){function e(){t.call(this)}return __extends(e,t),e.prototype.connect=function(t,e){null==this.communicator_&&(this.communicator_=this.createServerConnector(),this.communicator_.connect(t,e))},e}(t.SlaveSystem);t.SlaveClient=e}(e=t.slave||(t.slave={}))}(e=t.protocol||(t.protocol={}))}(samchon||(samchon={}));var samchon;!function(t){var e;!function(t){var e;!function(t){var e=function(t){function e(){t.call(this),this.server_base_=null}return __extends(e,t),e.prototype.open=function(t){this.server_base_=this.createServerBase(),null!=this.server_base_&&this.server_base_.open(t)},e.prototype.close=function(){null!=this.server_base_&&this.server_base_.close()},e.prototype.addClient=function(t){this.communicator_=t,t.listen(this)},e}(t.SlaveSystem);t.SlaveServer=e}(e=t.slave||(t.slave={}))}(e=t.protocol||(t.protocol={}))}(samchon||(samchon={}));var samchon;!function(t){var e;!function(e){function n(){var e=new t.collection.DequeCollection;e.addEventListener("insert",o),e.addEventListener("erase",o),e.push(1,2,3,4,5,6,7),e.pop_back(),std.remove(e.begin(),e.end(),5)}function o(t){console.log("Handle Event:",t.type);for(var e=t.first;!e.equal_to(t.last);e=e.next())console.log("\t"+e.value);console.log()}e.test_collection=n}(e=t.test||(t.test={}))}(samchon||(samchon={}));